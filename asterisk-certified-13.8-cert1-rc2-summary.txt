                                Release Summary

                       asterisk-certified/13.8-cert1-rc2

                                Date: 2016-05-03

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-certified/13.8-cert1-rc1.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                   Testers                  Reporters                
   8 Joshua Colp                                     5 George Joseph          
   6 Mark Michelson                                  3 gtjoseph               
   2 Richard Mudgett                                 2 Richard Mudgett        
   2 gtjoseph                                        2 nik600                 
   1 Alexei Gradinari                                2 Joshua Colp            
   1 George Joseph                                   2 John Bigelow           
   1 Kevin Harwell                                   1 Alexei Gradinari       

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Bug

    Category: Applications/app_queue

   ASTERISK-16115: [patch] problem with ringinuse=no, queue members receive
   sometimes two calls
   Reported by: nik600
     * [c69e0f1813] Joshua Colp -- app_queue: Fix crash when unloading
       module.
     * [eebe8b3dd3] Kevin Harwell -- app_queue: queue members can receive
       multiple calls

    Category: Core/Bridging

   ASTERISK-25947: Protocol transfers to stasis applications are missing the
   StasisStart with the replace_channel object.
   Reported by: Richard Mudgett
     * [bc51227ef8] Richard Mudgett -- res_stasis: Handle re-enter stasis
       bridge with swap channel.
     * [8dd79720e6] Richard Mudgett -- bridge: Hold off more than one
       imparting channel at a time.
   ASTERISK-24782: StasisEnd event not present for channel that was swapped
   out for another after completing attended transfer
   Reported by: John Bigelow
     * [bc51227ef8] Richard Mudgett -- res_stasis: Handle re-enter stasis
       bridge with swap channel.
     * [8dd79720e6] Richard Mudgett -- bridge: Hold off more than one
       imparting channel at a time.

    Category: Resources/res_agi

   ASTERISK-25951: res_agi: run_agi eats frames it shouldn't
   Reported by: George Joseph
     * [5cbd4b9799] gtjoseph -- res_agi: Prevent run_agi from eating frames
       it shouldn't

    Category: Resources/res_pjsip

   ASTERISK-25928: res_pjsip: URI validation done outside of PJSIP thread
   Reported by: Joshua Colp
     * [9f3ecf0a8d] Mark Michelson -- PJSIP: Remove PJSIP parsing functions
       from uri length validation.
   ASTERISK-25796: res_pjsip: DOS/Crash when TCP/TLS sockets exceed pjproject
   PJ_IOQUEUE_MAX_HANDLES
   Reported by: George Joseph
     * [9f8b803a29] Mark Michelson -- res_pjsip_transport_management: Kill
       idle TCP connections.
     * [a35d3eb73b] Mark Michelson -- Rename res_pjsip_keepalive
       res_pjsip_transport_management
   ASTERISK-25707: Long contact URIs or hostnames can crash
   pjproject/Asterisk under certain conditions
   Reported by: George Joseph
     * [3de37dee68] Mark Michelson -- AST-2016-004: Fix crash on REGISTER
       with long URI.

    Category: Resources/res_pjsip_caller_id

   ASTERISK-25942: res_pjsip_caller_id: Transfer results in mixed
   ConnectedLine information
   Reported by: George Joseph
     * [2a2e754d15] gtjoseph -- res_pjsip_callerid: Clear out display name if
       id->name is not valid

    Category: Resources/res_pjsip_registrar

   ASTERISK-25929: res_pjsip_registrar: AOR_CONTACT_ADDED events not raised
   Reported by: Joshua Colp
     * [39b4742db1] Mark Michelson -- res_pjsip_registrar: Fix bad
       memory-ness with user_agent.

    Category: Resources/res_stasis

   ASTERISK-25947: Protocol transfers to stasis applications are missing the
   StasisStart with the replace_channel object.
   Reported by: Richard Mudgett
     * [bc51227ef8] Richard Mudgett -- res_stasis: Handle re-enter stasis
       bridge with swap channel.
     * [8dd79720e6] Richard Mudgett -- bridge: Hold off more than one
       imparting channel at a time.
   ASTERISK-24649: Pushing of channel into bridge fails; Stasis fails to get
   app name
   Reported by: John Bigelow
     * [bc51227ef8] Richard Mudgett -- res_stasis: Handle re-enter stasis
       bridge with swap channel.
     * [8dd79720e6] Richard Mudgett -- bridge: Hold off more than one
       imparting channel at a time.
   ASTERISK-24782: StasisEnd event not present for channel that was swapped
   out for another after completing attended transfer
   Reported by: John Bigelow
     * [bc51227ef8] Richard Mudgett -- res_stasis: Handle re-enter stasis
       bridge with swap channel.
     * [8dd79720e6] Richard Mudgett -- bridge: Hold off more than one
       imparting channel at a time.

  Improvement

    Category: Resources/res_pjsip

   ASTERISK-25930: PJSIP: disable multi domain to improve realtime performace
   Reported by: Alexei Gradinari
     * [c4426f1035] Alexei Gradinari -- res_pjsip: disable multi domain to
       improve realtime performace

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author         | Summary                                  |
   |------------+----------------+------------------------------------------|
   | cadb5c4e64 | Joshua Colp    | Release summaries: Remove previous       |
   |            |                | versions                                 |
   |------------+----------------+------------------------------------------|
   | d4d5548ef8 | Joshua Colp    | .version: Update for                     |
   |            |                | certified/13.8-cert1-rc2                 |
   |------------+----------------+------------------------------------------|
   | a5bc40ae51 | Joshua Colp    | .lastclean: Update for                   |
   |            |                | certified/13.8-cert1-rc2                 |
   |------------+----------------+------------------------------------------|
   | 2b6df52c66 | Joshua Colp    | realtime: Add database scripts for       |
   |            |                | certified/13.8-cert1-rc2                 |
   |------------+----------------+------------------------------------------|
   | 188ce34aff | Joshua Colp    | app_talkdetect: Make the module core     |
   |            |                | supported.                               |
   |------------+----------------+------------------------------------------|
   | da80f40014 | Joshua Colp    | app_talkdetect: Enable for testsuite     |
   |            |                | tests.                                   |
   |------------+----------------+------------------------------------------|
   | 4caa57f6b3 | Joshua Colp    | res_pjsip_transport_management: Allow    |
   |            |                | unload to occur.                         |
   |------------+----------------+------------------------------------------|
   | 0b35582bbb | Mark Michelson | transport management: Register thread    |
   |            |                | with PJProject.                          |
   |------------+----------------+------------------------------------------|
   | e378c18815 | gtjoseph       | pjproject-bundled: Cleanups for reported |
   |            |                | issues                                   |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 asterisk-certified-13.8-cert1-rc1-summary.html                                         | 2338 ----
 asterisk-certified-13.8-cert1-rc1-summary.txt                                          | 5712 ----------
 b/.version                                                                             |    2
 b/CHANGES                                                                              |   10
 b/apps/app_queue.c                                                                     |  146
 b/apps/app_talkdetect.c                                                                |    3
 b/bootstrap.sh                                                                         |    2
 b/configs/samples/pjsip.conf.sample                                                    |    5
 b/configure                                                                            |   11
 b/configure.ac                                                                         |    1
 b/contrib/ast-db-manage/config/versions/8d478ab86e29_pjsip_add_disable_multi_domain.py |   31
 b/contrib/realtime/mssql/mssql_config.sql                                              |   14
 b/contrib/realtime/mysql/mysql_config.sql                                              |    6
 b/contrib/realtime/oracle/oracle_config.sql                                            |   14
 b/contrib/realtime/postgresql/postgresql_config.sql                                    |    6
 b/include/asterisk/bridge_channel_internal.h                                           |   38
 b/include/asterisk/res_pjsip.h                                                         |    8
 b/main/bridge.c                                                                        |  211
 b/main/bridge_channel.c                                                                |   26
 b/res/res_agi.c                                                                        |   40
 b/res/res_pjsip.c                                                                      |    6
 b/res/res_pjsip/config_global.c                                                        |   23
 b/res/res_pjsip/include/res_pjsip_private.h                                            |    7
 b/res/res_pjsip/location.c                                                             |   77
 b/res/res_pjsip_caller_id.c                                                            |    6
 b/res/res_pjsip_endpoint_identifier_anonymous.c                                        |   38
 b/res/res_pjsip_endpoint_identifier_user.c                                             |   38
 b/res/res_pjsip_outbound_registration.c                                                |    8
 b/res/res_pjsip_registrar.c                                                            |   32
 b/res/res_pjsip_transport_management.c                                                 |  380
 b/res/stasis/control.c                                                                 |   14
 b/res/stasis/control.h                                                                 |   18
 b/res/stasis/stasis_bridge.c                                                           |   46
 res/res_pjsip_keepalive.c                                                              |  269
 34 files changed, 1070 insertions(+), 8516 deletions(-)
