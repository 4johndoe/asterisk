                                Release Summary

                              asterisk-13.3.0-rc1

                                Date: 2015-03-23

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release includes only bug fixes. The changes included were made only
   to address problems that have been identified in this release series.
   Users should be able to safely upgrade to this version if this release
   series is already in use. Users considering upgrading from a previous
   release series are strongly encouraged to review the UPGRADE.txt document
   as well as the CHANGES document for information about upgrading to this
   release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-13.2.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were closed by commits that went into this
   release.

     Coders                   Testers                  Reporters              
   25 rmudgett              2 Graham Barnett         7 coreyfarrell           
   17 mjordan               2 snuffy                 5 mjordan                
   16 jcolp                 1 JoshE                  5 rnewton                
   9 kharwell               1 mjordan                4 jcolp                  
   7 coreyfarrell                                    3 GrahamJB               
   4 file                                            3 kharwell               
   4 Graham Barnett                                  3 rmudgett               
   4 sgriepentrog                                    2 n8ideas                
   3 gtjoseph                                        2 snuffy                 
   2 oej                                             2 zconkle                
   2 snuffy                                          1 anatoli                
   1 Alexander Traud                                 1 asanders               
   1 Ben Merrills                                    1 atis                   
   1 Diederik de Groot                               1 bford                  
   1 dlee                                            1 cbbs70a                
   1 Ed Hynan                                        1 DarkS                  
   1 ibercom                                         1 dcabot                 
   1 Javier Acosta                                   1 Demon                  
   1 jrose                                           1 dhubbard               
   1 Makoto Dei                                      1 dkdegroot              
   1 newtonr                                         1 Ed                     
   1 Richard Miller                                  1 falves11               
                                                     1 feyfre                 
                                                     1 ibercom                
                                                     1 jbigelow               
                                                     1 jputnam                
                                                     1 kenner                 
                                                     1 klaus3000              
                                                     1 makoto                 
                                                     1 mhoskins               
                                                     1 mmichelson             
                                                     1 pnlarsson              
                                                     1 roeften                
                                                     1 rossbeer               
                                                     1 simmcomm               
                                                     1 skrusty                
                                                     1 smurfix                
                                                     1 StefanEng86            
                                                     1 traud                  
                                                     1 twilson                
                                                     1 ulogic                 
                                                     1 yurakocyuba            

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Category: Applications/app_amd

   ASTERISK-19470: Documentation on app_amd is incorrect
   Revision: 432920
   Reporter: cbbs70a
   Coders: mjordan

  Category: Applications/app_chanspy

   ASTERISK-24828: Fix Frame Leaks
   Revision: 432363
   Reporter: kharwell
   Coders: kharwell

  Category: Applications/app_dial

   ASTERISK-24499: Need more explicit debug when PJSIP dialstring is invalid
   Revision: 432118
   Reporter: rnewton
   Coders: jcolp

  Category: Applications/app_transfer

   ASTERISK-24015: app_transfer fails with PJSIP channels
   Revision: 431717
   Reporter: falves11
   Coders: mjordan

  Category: Applications/app_voicemail

   ASTERISK-24790: Reduce spurious noise in logs from voicemail - Couldn't
   find mailbox %s in context
   Revision: 432099
   Reporter: GrahamJB
   Coders: Graham Barnett

  Category: Applications/app_voicemail/IMAP

   ASTERISK-24786: [patch] - Asterisk terminates when playing a voicemail
   stored in LDAP
   Revision: 432696
   Reporter: GrahamJB
   Testers: Graham Barnett
   Coders: Graham Barnett

   ASTERISK-24787: [patch] - Microsoft exchange incompatibility for playing
   back messages stored in IMAP - play_message: No origtime
   Revision: 432013
   Reporter: GrahamJB
   Coders: Graham Barnett

  Category: Bridges/bridge_softmix

   ASTERISK-24797: bridge_softmix: G.729 codec license held
   Revision: 432175
   Reporter: kharwell
   Coders: kharwell

  Category: Channels/chan_dahdi

   ASTERISK-24689: Segfault on hangup after outgoing PRI-Euroisdn call
   Revision: 431974
   Reporter: simmcomm
   Coders: rmudgett

   ASTERISK-24825: Caller ID not recognized using Centrex/Distinctive dialing
   Revision: 432534
   Reporter: rmudgett
   Coders: rmudgett

  Category: Channels/chan_iax2

   ASTERISK-24451: chan_iax2: reference leak in sched_delay_remove
   Revision: 431917
   Reporter: coreyfarrell
   Coders: coreyfarrell

  Category: Channels/chan_pjsip

   ASTERISK-24771: ${CHANNEL(pjsip)} - segfault
   Revision: 431751
   Reporter: pnlarsson
   Coders: jcolp

  Category: Channels/chan_sip/DatabaseSupport

   ASTERISK-24772: ODBC error in realtime sippeers when device unregisters
   under MariaDB
   Revision: 431674
   Reporter: ulogic
   Coders: Richard Miller

  Category: Channels/chan_sip/General

   ASTERISK-15434: [patch] When ast_pbx_start failed, both an error response
   and BYE are sent to the caller
   Revision: 432321
   Reporter: makoto
   Testers: mjordan
   Coders: Makoto Dei

   ASTERISK-23214: chan_sip WARNING message 'We are requesting SRTP for
   audio, but they responded without it' is ambiguous and wrong in some cases
   Revision: 432278
   Reporter: rnewton
   Coders: mjordan

   ASTERISK-24800: Crash in __sip_reliable_xmit due to invalid thread ID
   being passed to pthread_kill
   Revision: 432199
   Reporter: n8ideas
   Coders: mjordan

   ASTERISK-24838: chan_sip: Locking inversion occurs when building a peer
   causes a peer poke during request handling
   Revision: 432528
   Reporter: rmudgett
   Coders: rmudgett

   ASTERISK-24876: Investigate reference leaks from
   tests/channels/local/local_optimize_away
   Revision: 433113
   Reporter: coreyfarrell
   Coders: coreyfarrell

   ASTERISK-24882: chan_sip: Improve usage of REF_DEBUG
   Revision: 433115
   Reporter: coreyfarrell
   Coders: coreyfarrell

  Category: Channels/chan_sip/NewFeature

   ASTERISK-17899: [patch] Adds a 'ignorecryptolifetime' (Ignore Crypto
   Lifetime) option to sip.conf for SRTP keys specifying optional 'lifetime'
   Revision: 432258
   Reporter: dhubbard
   Coders: oej

  Category: Channels/chan_sip/SRTP

   ASTERISK-17721: Incoming SRTP calls that specify a key lifetime fail
   Revision: 432258
   Reporter: twilson
   Coders: oej

  Category: Channels/chan_sip/TCP-TLS

   ASTERISK-24799: [patch] make fails with undefined reference to
   SSLv3_client_method
   Revision: 431937
   Reporter: traud
   Coders: Alexander Traud

  Category: Contrib/General

   ASTERISK-24632: install_prereq script installs pjproject without IPv6
   support
   Revision: 431843
   Reporter: rnewton
   Coders: jcolp

  Category: Core/Bridging

   ASTERISK-24752: Crash in bridge_manager_service_req when bridge is
   destroyed by ARI during shutdown
   Revision: 431692
   Reporter: rmudgett
   Coders: rmudgett

  Category: Core/BuildSystem

   ASTERISK-18105: most of asterisk modules are unbuildable in cygwin
   environment
   Revision: 432342
   Reporter: feyfre
   Coders: mjordan

   ASTERISK-20850: [patch]Nested functions aren't portable. Adapting RAII_VAR
   to use clang/llvm blocks to get the same/similar functionality.
   Revision: 432808
   Reporter: dkdegroot
   Coders: Diederik de Groot

   ASTERISK-24880: [patch]Compilation under OpenBSD
   Revision: 433247
   Reporter: snuffy
   Testers: snuffy
   Coders: snuffy

  Category: Core/Channels

   ASTERISK-21038: Bad command completion of "core set debug channel"
   Revision: 432945
   Reporter: kenner
   Coders: jcolp

   ASTERISK-24828: Fix Frame Leaks
   Revision: 432363
   Reporter: kharwell
   Coders: kharwell

  Category: Core/CodecInterface

   ASTERISK-16779: Cannot disallow unknown format ''
   Revision: 432971
   Reporter: atis
   Coders: mjordan

   ASTERISK-24796: Codecs and bucket schema's prevent module unload
   Revision: 432059
   Reporter: coreyfarrell
   Coders: coreyfarrell

  Category: Core/General

   ASTERISK-24479: Enable REF_DEBUG for module references
   Revision: 431663
   Reporter: coreyfarrell
   Coders: coreyfarrell

   ASTERISK-24739: [patch] - Out of files -- call fails -- numerous files
   with inodes from under /usr/share/zoneinfo, mostly posixrules
   Revision: 432693
   Reporter: Ed
   Coders: Ed Hynan

   ASTERISK-24740: [patch]Segmentation fault on aoc-e event
   Revision: 431974
   Reporter: roeften
   Coders: rmudgett

   ASTERISK-24752: Crash in bridge_manager_service_req when bridge is
   destroyed by ARI during shutdown
   Revision: 431692
   Reporter: rmudgett
   Coders: rmudgett

   ASTERISK-24796: Codecs and bucket schema's prevent module unload
   Revision: 432059
   Reporter: coreyfarrell
   Coders: coreyfarrell

   ASTERISK-24814: asterisk/lock.h: Fix syntax errors for non-gcc OSX with 64
   bit integers
   Revision: 432055
   Reporter: coreyfarrell
   Coders: coreyfarrell

   ASTERISK-24879: [patch]Compilation fails due to 64bit time under OpenBSD
   Revision: 433269
   Reporter: snuffy
   Testers: snuffy
   Coders: snuffy

  Category: Core/HTTP

   ASTERISK-24724: 'httpstatus' Web Page Produces Incomplete HTML
   Revision: 432079
   Reporter: asanders
   Coders: jcolp

  Category: Core/Logging

   ASTERISK-24817: init_logger_chain: unreachable code block
   Revision: 433126
   Reporter: coreyfarrell
   Coders: coreyfarrell

  Category: Core/ManagerInterface

   ASTERISK-22670: Asterisk crashes when processing ISDN AoC Events
   Revision: 431974
   Reporter: klaus3000
   Coders: rmudgett

  Category: Core/Sorcery

   ASTERISK-24612: res_pjsip: No information if a required sorcery wizard is
   not loaded
   Revision: 431771
   Reporter: jcolp
   Coders: jcolp

  Category: Documentation

   ASTERISK-24085: Documentation - We should remove or further document the
   'contact' section in pjsip.conf
   Revision: 431860
   Reporter: rnewton
   Coders: jcolp

  Category: Functions/func_curl

   ASTERISK-18708: func_curl hangs channel under load
   Revision: 432949
   Reporter: dcabot
   Coders: jcolp

  Category: Resources/res_agi

   ASTERISK-23390: NewExten Event with application AGI shows up before and
   after AGI runs
   Revision: 432696
   Reporter: bford
   Testers: Graham Barnett
   Coders: Graham Barnett

  Category: Resources/res_ari

   ASTERISK-24812: ARI: Creating channels through /channels resource always
   uses SLIN, which results in unneeded transcoding
   Revision: 432195
   Reporter: mjordan
   Coders: mjordan

  Category: Resources/res_ari_channels

   ASTERISK-24677: ARI GET variable on channel provides unhelpful response on
   non-existent variable
   Revision: 432154
   Reporter: jcolp
   Coders: jcolp

   ASTERISK-24703: ARI: Add the ability to "transfer" (redirect) a channel
   Revision: 431717
   Reporter: mjordan
   Coders: mjordan

   ASTERISK-24812: ARI: Creating channels through /channels resource always
   uses SLIN, which results in unneeded transcoding
   Revision: 432195
   Reporter: mjordan
   Coders: mjordan

  Category: Resources/res_config_odbc

   ASTERISK-24808: res_config_odbc: Improper escaping of backslashes occurs
   with MySQL
   Revision: 432721
   Reporter: DarkS
   Coders: Javier Acosta

  Category: Resources/res_format_attr_h264

   ASTERISK-24616: Crash in res_format_attr_h264 due to invalid string copy
   Revision: 431521
   Reporter: yurakocyuba
   Coders: jcolp

  Category: Resources/res_odbc

   ASTERISK-24742: [patch] Fix ast_odbc_find_table function in res_odbc
   Revision: 431618
   Reporter: ibercom
   Coders: ibercom

  Category: Resources/res_pjsip

   ASTERISK-24499: Need more explicit debug when PJSIP dialstring is invalid
   Revision: 432118
   Reporter: rnewton
   Coders: jcolp

   ASTERISK-24685: "pjsip show version" CLI command
   Revision: 431824
   Reporter: jcolp
   Coders: jcolp

   ASTERISK-24727: PJSIP: Crash experienced during multi-Asterisk transfer
   scenario.
   Revision: 431734
   Reporter: mmichelson
   Coders: rmudgett

   ASTERISK-24741: dtls_handler causes Asterisk to crash
   Revision: 431698
   Reporter: zconkle
   Coders: kharwell

   ASTERISK-24748: res_pjsip: If wizards explicitly configured in
   sorcery.conf false ERROR messages may occur
   Revision: 431538
   Reporter: jcolp
   Coders: jcolp

   ASTERISK-24755: Asterisk sends unexpected early BYE to transferrer during
   attended transfer when using a Stasis bridge
   Revision: 432668
   Reporter: jbigelow
   Coders: rmudgett

   ASTERISK-24840: res_pjsip: conflicting endpoint identifiers
   Revision: 432638
   Reporter: kharwell
   Coders: kharwell

   ASTERISK-24872: [patch] AMI PJSIPShowEndpoint closes AMI connection on
   error
   Revision: 432894
   Reporter: Demon
   Coders: rmudgett

  Category: Resources/res_pjsip_exten_state

   ASTERISK-24716: Improve pjsip log messages for presence subscription
   failure
   Revision: 431754
   Reporter: rnewton
   Coders: jcolp

  Category: Resources/res_pjsip_publish_asterisk

   ASTERISK-24811: asterisk-publication sorcery object does not use realtime
   Revision: 432033
   Reporter: mhoskins
   Coders: gtjoseph

  Category: Resources/res_pjsip_refer

   ASTERISK-24700: CRASH: NULL channel is being passed to
   ast_bridge_transfer_attended()
   Revision: 431898
   Reporter: zconkle
   Coders: rmudgett

  Category: Resources/res_pjsip_registrar

   ASTERISK-24785: 'Expires' header missing from 200 OK on REGISTER
   Revision: 432136
   Reporter: rossbeer
   Coders: jcolp

  Category: Resources/res_pjsip_sdp_rtp

   ASTERISK-24769: res_pjsip_sdp_rtp: Local ICE candidates leaked
   Revision: 431600
   Reporter: mjordan
   Coders: mjordan

  Category: Resources/res_rtp_asterisk

   ASTERISK-24791: Crash in ast_rtcp_write_report
   Revision: 431879
   Reporter: n8ideas
   Testers: JoshE
   Coders: mjordan

  Category: Resources/res_stasis

   ASTERISK-24701: Stasis: Write timeout on WebSocket fails to fully
   disconnect underlying socket, leading to events being dropped with no
   additional information
   Revision: 431670
   Reporter: mjordan
   Coders: kharwell

   ASTERISK-24701: Stasis: Write timeout on WebSocket fails to fully
   disconnect underlying socket, leading to events being dropped with no
   additional information
   Revision: 431693
   Reporter: mjordan
   Coders: kharwell

   ASTERISK-24755: Asterisk sends unexpected early BYE to transferrer during
   attended transfer when using a Stasis bridge
   Revision: 432668
   Reporter: jbigelow
   Coders: rmudgett

  Category: Resources/res_timing_pthread

   ASTERISK-24768: res_timing_pthread: file descriptor leak
   Revision: 431807
   Reporter: smurfix
   Coders: jcolp

  Category: pjproject/pjsip

   ASTERISK-24807: Missing mandatory field Max-Forwards
   Revision: 432766
   Reporter: anatoli
   Coders: rmudgett

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   directly close an issue from the issue tracker. The commits may have been
   marked as being related to an issue. If that is the case, the issue
   numbers are listed here, as well.

   +------------------------------------------------------------------------+
   | Revision | Author       | Summary                         | Issues     |
   |          |              |                                 | Referenced |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip_keepalive: Don't      |            |
   | 431555   | file         | crash if PJSIP module is not    |            |
   |          |              | loaded.                         |            |
   |----------+--------------+---------------------------------+------------|
   | 431583   | sgriepentrog | various: cleanup issues found   |            |
   |          |              | during leak hunt                |            |
   |----------+--------------+---------------------------------+------------|
   | 431643   | gtjoseph     | res_pjsip_config_wizard: Add    |            |
   |          |              | ability to auto-create hints.   |            |
   |----------+--------------+---------------------------------+------------|
   | 431752   | file         | 'information' ends with an 'n'. |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | apps/app_mixmonitor: Move Test  |            |
   | 431789   | mjordan      | Event for MIXMONITOR_END to     |            |
   |          |              | after it finishes               |            |
   |----------+--------------+---------------------------------+------------|
   | 431841   | file         | res_sorcery_config: Improve     |            |
   |          |              | object lookup times.            |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip_refer: Handle INVITE  |            |
   | 431956   | rmudgett     | with Replaces failure after     |            |
   |          |              | answer.                         |            |
   |----------+--------------+---------------------------------+------------|
   | 431993   | rmudgett     | chan_dahdi: Remove some dead    |            |
   |          |              | code.                           |            |
   |----------+--------------+---------------------------------+------------|
   | 432034   | rmudgett     | chan_dahdi/sig_analog: Put log  |            |
   |          |              | message strings on one line.    |            |
   |----------+--------------+---------------------------------+------------|
   | 432237   | dlee         | Increase WebSocket frame size   |            |
   |          |              | and improve large read handling |            |
   |----------+--------------+---------------------------------+------------|
   | 432281   | mjordan      | configure: Promote SQLite3 "not |            |
   |          |              | installed" warning to error     |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | configs/basic-pbx - Super       |            |
   | 432301   | newtonr      | Awesome Company example configs |            |
   |          |              | Phase 1, Patch 1                |            |
   |----------+--------------+---------------------------------+------------|
   | 432385   | sgriepentrog | Dial API: add self destruct     |            |
   |          |              | option when complete            |            |
   |----------+--------------+---------------------------------+------------|
   | 432423   | mjordan      | res/res_pjsip_sdp_rtp: Revert   |            |
   |          |              | portion of r432195              |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | translate: Prevent invalid      |            |
   | 432453   | mjordan      | memory accesses on fast         |            |
   |          |              | shutdown                        |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | app_voicemail: Fix compile      |            |
   | 432485   | gtjoseph     | breaking in app_voicemail with  |            |
   |          |              | IMAP_STORAGE.                   |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | app: Add functions to swap      |            |
   | 432556   | jrose        | voicemail function table for    |            |
   |          |              | testing purposes                |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip_refer: Made           |            |
   | 432574   | rmudgett     | refer_attended_alloc() not      |            |
   |          |              | create the ao2 object with a    |            |
   |          |              | lock.                           |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip_refer: Make safely    |            |
   | 432594   | rmudgett     | get the context for a blind     |            |
   |          |              | transfer.                       |            |
   |----------+--------------+---------------------------------+------------|
   | 432742   | file         | core: Don't create snapshots    |            |
   |          |              | with locks.                     |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip: Fixed invalid empty  |            |
   | 432764   | rmudgett     | Server and User-Agent SIP       |            |
   |          |              | headers.                        |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip: Move internal        |            |
   | 432787   | rmudgett     | init/destroy prototypes to      |            |
   |          |              | private header file.            |            |
   |----------+--------------+---------------------------------+------------|
   | 432811   | mjordan      | main/audiohook: Update internal |            |
   |          |              | sample rate on reads            |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | Revert - res_pjsip: Allow       |            |
   | 432868   | kharwell     | configuration of endpoint       |            |
   |          |              | identifier query order          |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | chan_pjsip/res_pjsip_callerid:  |            |
   | 432892   | rmudgett     | Make Party ID handling simpler  |            |
   |          |              | and consistent.                 |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | FILE: fix retrieval of file     |            |
   | 432938   | mjordan      | contents when offset is         |            |
   |          |              | specified                       |            |
   |----------+--------------+---------------------------------+------------|
   | 433005   | rmudgett     | res_pjsip: Add reason comment.  |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip: Allow configuration  |            |
   | 433028   | kharwell     | of endpoint identifier query    |            |
   |          |              | order                           |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip: Allow configuration  |            |
   | 433031   | kharwell     | of endpoint identifier query    |            |
   |          |              | order                           |            |
   |----------+--------------+---------------------------------+------------|
   | 433057   | rmudgett     | Audit ast_sockaddr_resolve()    |            |
   |          |              | usage for memory leaks.         |            |
   |----------+--------------+---------------------------------+------------|
   | 433060   | sgriepentrog | core: Introduce chaos into      |            |
   |          |              | memory allocations              |            |
   |----------+--------------+---------------------------------+------------|
   | 433064   | sgriepentrog | Various: bugfixes found via     |            |
   |          |              | chaos                           |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip_session: Fix          |            |
   | 433088   | rmudgett     | off-nominal extra unref of      |            |
   |          |              | session.                        |            |
   |----------+--------------+---------------------------------+------------|
   | 433174   | mjordan      | funcs/func_env: Fix regression  |            |
   |          |              | caused in FILE read operation   |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | res_pjsip_sdp_rtp,sorcery: Fix  |            |
   | 433199   | rmudgett     | invalid access and memory leak  |            |
   |          |              | respectively.                   |            |
   |----------+--------------+---------------------------------+------------|
   |          |              | Audit                           |            |
   | 433222   | rmudgett     | ast_pjsip_rdata_get_endpoint()  |            |
   |          |              | usage for ref leaks.            |            |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 CHANGES                                                                                   |   25
 Makefile                                                                                  |    4
 UPGRADE.txt                                                                               |    9
 apps/Makefile                                                                             |    2
 apps/app_amd.c                                                                            |    3
 apps/app_chanspy.c                                                                        |    3
 apps/app_confbridge.c                                                                     |    6
 apps/app_externalivr.c                                                                    |    2
 apps/app_mixmonitor.c                                                                     |    7
 apps/app_queue.c                                                                          |   26
 apps/app_voicemail.c                                                                      |   46
 bridges/bridge_builtin_features.c                                                         |    8
 bridges/bridge_softmix.c                                                                  |   37
 build_tools/cflags.xml                                                                    |    4
 channels/Makefile                                                                         |    2
 channels/chan_dahdi.c                                                                     |  124 +-
 channels/chan_dahdi.h                                                                     |    2
 channels/chan_iax2.c                                                                      |    4
 channels/chan_pjsip.c                                                                     |  128 +-
 channels/chan_sip.c                                                                       |  179 +--
 channels/pjsip/dialplan_functions.c                                                       |    5
 channels/sig_analog.c                                                                     |  192 +--
 channels/sig_analog.h                                                                     |    1
 channels/sip/include/dialog.h                                                             |   15
 channels/sip/include/sip.h                                                                |   11
 configs/basic-pbx/README                                                                  |   15
 configs/basic-pbx/asterisk.conf                                                           |   26
 configs/basic-pbx/extensions.conf                                                         |   58 +
 configs/basic-pbx/indications.conf                                                        |   19
 configs/basic-pbx/logger.conf                                                             |    9
 configs/basic-pbx/modules.conf                                                            |  102 ++
 configs/basic-pbx/musiconhold.conf                                                        |    5
 configs/basic-pbx/pjsip.conf                                                              |  287 +++++
 configs/basic-pbx/voicemail.conf                                                          |   23
 configs/samples/amd.conf.sample                                                           |    1
 configs/samples/pjsip.conf.sample                                                         |   15
 configs/samples/pjsip_wizard.conf.sample                                                  |   22
 configure.ac                                                                              |   49 -
 contrib/ast-db-manage/config/versions/45e3f47c6c44_add_pjsip_endpoint_identifier_order.py |   21
 contrib/scripts/install_prereq                                                            |    2
 funcs/func_cdr.c                                                                          |    6
 funcs/func_curl.c                                                                         |    2
 funcs/func_env.c                                                                          |    2
 include/asterisk.h                                                                        |   36
 include/asterisk/app.h                                                                    |   16
 include/asterisk/channel.h                                                                |   19
 include/asterisk/config.h                                                                 |    5
 include/asterisk/dial.h                                                                   |    1
 include/asterisk/inline_api.h                                                             |   12
 include/asterisk/json.h                                                                   |   18
 include/asterisk/lock.h                                                                   |    2
 include/asterisk/module.h                                                                 |   27
 include/asterisk/res_pjsip.h                                                              |  119 --
 include/asterisk/res_pjsip_session.h                                                      |   14
 include/asterisk/sched.h                                                                  |   11
 include/asterisk/stasis_app.h                                                             |   11
 include/asterisk/utils.h                                                                  |   67 +
 main/Makefile                                                                             |    1
 main/aoc.c                                                                                |   88 +
 main/app.c                                                                                |   51 +
 main/asterisk.c                                                                           |  255 +++--
 main/audiohook.c                                                                          |   15
 main/bridge.c                                                                             |   14
 main/bucket.c                                                                             |    2
 main/cdr.c                                                                                |    8
 main/channel.c                                                                            |   40
 main/cli.c                                                                                |    4
 main/codec.c                                                                              |    4
 main/codec_builtin.c                                                                      |    2
 main/config.c                                                                             |   17
 main/dial.c                                                                               |    8
 main/endpoints.c                                                                          |    8
 main/format_cap.c                                                                         |    4
 main/http.c                                                                               |    9
 main/json.c                                                                               |   29
 main/loader.c                                                                             |   79 +
 main/logger.c                                                                             |   31
 main/manager.c                                                                            |    7
 main/netsock2.c                                                                           |    4
 main/rtp_engine.c                                                                         |    2
 main/sched.c                                                                              |   20
 main/sdp_srtp.c                                                                           |  109 +-
 main/sorcery.c                                                                            |   11
 main/stasis_bridges.c                                                                     |    3
 main/stasis_channels.c                                                                    |    6
 main/stdtime/localtime.c                                                                  |  279 ++++-
 main/tcptls.c                                                                             |    5
 main/translate.c                                                                          |    4
 main/utils.c                                                                              |    4
 main/xmldoc.c                                                                             |    9
 makeopts.in                                                                               |    2
 res/ari/ari_websockets.c                                                                  |   14
 res/ari/resource_channels.c                                                               |  136 ++
 res/ari/resource_channels.h                                                               |   26
 res/ari/resource_endpoints.c                                                              |   61 -
 res/res_ari_channels.c                                                                    |  115 ++
 res/res_ari_endpoints.c                                                                   |    1
 res/res_config_odbc.c                                                                     |    8
 res/res_format_attr_h264.c                                                                |    4
 res/res_http_websocket.c                                                                  |   43
 res/res_odbc.c                                                                            |   11
 res/res_pjsip.c                                                                           |  150 ++-
 res/res_pjsip/config_domain_aliases.c                                                     |    1
 res/res_pjsip/config_global.c                                                             |  152 ++-
 res/res_pjsip/include/res_pjsip_private.h                                                 |  164 +++
 res/res_pjsip/pjsip_cli.c                                                                 |   25
 res/res_pjsip/pjsip_configuration.c                                                       |   14
 res/res_pjsip/pjsip_global_headers.c                                                      |   14
 res/res_pjsip/pjsip_options.c                                                             |   23
 res/res_pjsip_acl.c                                                                       |    3
 res/res_pjsip_caller_id.c                                                                 |   53 -
 res/res_pjsip_config_wizard.c                                                             |  224 ++++
 res/res_pjsip_endpoint_identifier_anonymous.c                                             |    2
 res/res_pjsip_endpoint_identifier_ip.c                                                    |    2
 res/res_pjsip_endpoint_identifier_user.c                                                  |    2
 res/res_pjsip_exten_state.c                                                               |    3
 res/res_pjsip_keepalive.c                                                                 |    2
 res/res_pjsip_messaging.c                                                                 |   24
 res/res_pjsip_multihomed.c                                                                |    5
 res/res_pjsip_nat.c                                                                       |   12
 res/res_pjsip_publish_asterisk.c                                                          |    1
 res/res_pjsip_pubsub.c                                                                    |    2
 res/res_pjsip_refer.c                                                                     |  263 +++--
 res/res_pjsip_registrar.c                                                                 |    8
 res/res_pjsip_sdp_rtp.c                                                                   |   22
 res/res_pjsip_send_to_voicemail.c                                                         |   10
 res/res_pjsip_session.c                                                                   |  488 +++++++---
 res/res_pjsip_session.exports.in                                                          |    1
 res/res_pjsip_t38.c                                                                       |    4
 res/res_pjsip_transport_websocket.c                                                       |    2
 res/res_rtp_asterisk.c                                                                    |   20
 res/res_sorcery_config.c                                                                  |   46
 res/res_timing_pthread.c                                                                  |    3
 res/stasis/control.c                                                                      |   32
 rest-api/api-docs/channels.json                                                           |   53 +
 rest-api/api-docs/endpoints.json                                                          |    4
 tests/test_func_file.c                                                                    |    6
 137 files changed, 4102 insertions(+), 1158 deletions(-)

     ----------------------------------------------------------------------
