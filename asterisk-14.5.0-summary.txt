                                Release Summary

                                asterisk-14.5.0

                                Date: 2017-05-30

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Open Issues
    5. Other Changes
    6. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-14.4.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                       Testers    Reporters                          
   25 Sean Bright               1 Aaron An 3 Joshua Colp                      
   17 Richard Mudgett                      3 Sandro Gauci                     
   13 George Joseph                        3 George Joseph                    
   8 Joshua Colp                           3 Richard Mudgett                  
   7 Kevin Harwell                         2 Walter Doekes                    
   3 Walter Doekes                         2 Richard Begg                     
   3 Alexander Traud                       2 scgm11                           
   3 Corey Farrell                         2 twisted                          
   2 Torrey Searle                         2 Alexander Traud                  
   2 Mark Michelson                        2 Jeremy Kister                    
   1 Sebastian Gutierrez                   2 Matthias Urlichs                 
   1 Roman S.                              2 Ross Beer                        
   1 Josh Roberson                         2 Matthias Urlichs                 
   1 Joshua Elson                          2 Jeremy Kister                    
   1 Daniel Journo                         1 gkloepfer                        
   1 Aaron An                              1 Etienne Lessard                  
   1 Jean Aunis                            1 Aaron An                         
   1 Joshua Colp (license 5000)            1 Jean Aunis - Prescom             
   1 Ivan Poddubny                         1 Frederic LE FOLL                 
   1 Thierry Magnien                       1 Bob Ham                          
   1 Vitezslav Novy                        1 Roman S.                         
   1 Rodrigo RamArez Norambuena            1 Javier Riveros                   
                                           1 Andreas KrA 1/4ger               
                                           1 Anthony Critelli                 
                                           1 Jens BA 1/4rger                  
                                           1 Yaacov Akiba Slama               
                                           1 Vitaly K                         
                                           1 Ksenia                           
                                           1 Walter Doekes                    
                                           1 Ivan Myalkin                     
                                           1 Ove Aursand                      
                                           1 Anthony Critelli                 
                                           1 Ksenia                           
                                           1 abelbeck                         
                                           1 Vitaly K                         
                                           1 Joerg Sonnenberger               
                                           1 Jens BA 1/4rger                  
                                           1 Sandro Gauci                     
                                           1 Marcello Ceschia                 
                                           1 SA(c)bastien Couture             
                                           1 Corey Farrell                    
                                           1 Henning Holtschneider            
                                           1 Ivan Myalkin                     
                                           1 Joel Vandal                      
                                           1 Badalian Vyacheslav              
                                           1 Sean Darcy                       
                                           1 Ross Beer                        
                                           1 Alex VillacAs Lasso              
                                           1 Olle Johansson                   
                                           1 Stefan EngstrAP:m                
                                           1 Richard Kenner                   
                                           1 Richard Mudgett                  
                                           1 Etienne Lessard                  
                                           1 Sean Darcy                       
                                           1 Joshua Elson                     
                                           1 Nir Simionovich (GreenfieldTech  
                                           - Israel)                          
                                           1 Evers Lab                        
                                           1 Henning Holtschneider            
                                           1 Ove Aursand                      
                                           1 Frederic LE FOLL                 
                                           1 Marcello Ceschia                 
                                           1 Aaron An                         
                                           1 Gergely DAP:msAP:di              
                                           1 Niklas Larsson                   
                                           1 Torrey Searle                    
                                           1 Adagio                           
                                           1 Roman S.                         

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Bug

    Category: Applications/app_confbridge

   ASTERISK-25506: [patch]CONFBRIDGE failure after an app_confbrige.so module
   reload results in segfault or error/warning messages.
   Reported by: Frederic LE FOLL
     * [e9d563c4db] George Joseph -- app_confbridge: Fix reference to cfg in
       menu_template_handler

    Category: Applications/app_mixmonitor

   ASTERISK-26169: format_ogg_vorbis: Memory leak using OGG in MixMonitor
   Reported by: Ivan Myalkin
     * [07e6f5806a] Sean Bright -- format_ogg_vorbis: Clear ogg/vorbis data
       structures on close
   ASTERISK-26875: app_mixmonitor: Recording out of sync when 183 but no RTP
   Reported by: Aaron An
     * [7a18dafe53] Aaron An -- audiohook.c: Lost RTP packets lead to
       out-of-sync MixMonitor.

    Category: Applications/app_queue

   ASTERISK-25665: Duplicate logging in queue log for EXITEMPTY events
   Reported by: Ove Aursand
     * [933c3f028d] Ivan Poddubny -- app_queue: Fix duplicate queue_log
       entries for EXITEMPTY and ABANDON

    Category: CDR/General

   ASTERISK-26818: cdr: Problem setting variables in h exten
   Reported by: scgm11
     * [24420b6676] Sebastian Gutierrez -- cdr: Allow setting of user field
       from 'h' extension

    Category: CDR/cdr_adaptive_odbc

   ASTERISK-26818: cdr: Problem setting variables in h exten
   Reported by: scgm11
     * [24420b6676] Sebastian Gutierrez -- cdr: Allow setting of user field
       from 'h' extension

    Category: CEL/cel_odbc

   ASTERISK-25032: [patch]cel_odbc sometimes inserts CEL with wrong eventtime
   Reported by: Etienne Lessard
     * [247cb7c9f2] George Joseph -- cel_odbc: Fix timestamp processing for
       microseconds

    Category: CEL/cel_pgsql

   ASTERISK-26896: Overflow of buffer to PQEscapeStringConn with large
   app_args causes ABRT
   Reported by: twisted
     * [c9707febe3] Sean Bright -- cdr_pgsql: Fix buffer overflow calling
       libpq
     * [43c785545b] Josh Roberson -- cel_pgsql.c: Fix buffer overflow calling
       libpq

    Category: Channels/chan_sip/General

   ASTERISK-26982: chan_sip: rtcp_mux setting may cause ice completion
   failure/delay if client offers rtcp-mux as negotiable
   Reported by: Stefan EngstrAP:m
     * [48a59c5679] Sean Bright -- chan_sip: Better ICE handling for RTCP-MUX
   ASTERISK-26922: chan_sip: tcpbind uses wrong source address
   Reported by: Ksenia
     * [5cee143d9c] Thierry Magnien -- channels/chan_sip.c: use binding IP
       address for outgoing TCP SIP connections
   ASTERISK-26951: chan_sip: ACK with SDP does not update a direct media
   bridge
   Reported by: Jean Aunis - Prescom
     * [87a24362a2] Jean Aunis -- chan_sip: Trigger reinvite if the SDP
       answer is included in the SIP ACK
   ASTERISK-26692: res_rtp_asterisk: Crash in dtls_srtp_handle_timeout at
   res_rtp_asterisk (using chan_sip)
   Reported by: scgm11
     * [f5af1a1f74] Richard Mudgett -- res_rtp_asterisk.c: Fix crash in RTCP
       DTLS operation.
   ASTERISK-26897: chan_sip: Security vulnerability with client code header
   Reported by: Alex VillacAs Lasso
     * [b8df68c62d] Corey Farrell -- CDR: Protect from data overflow in
       ast_cdr_setuserfield.

    Category: Channels/chan_sip/Interoperability

   ASTERISK-21721: SIP Failed to parse multiple Supported: headers
   Reported by: Olle Johansson
     * [65c87a8ea9] Alexander Traud -- chan_sip: Session Timers required but
       refused wrongly.
   ASTERISK-26915: chan_sip: Session Timers required but refused wrongly.
   Reported by: Alexander Traud
     * [65c87a8ea9] Alexander Traud -- chan_sip: Session Timers required but
       refused wrongly.

    Category: Channels/chan_sip/SRTP

   ASTERISK-25490: [patch]SDP crypto tag is validated incorrectly
   Reported by: Joerg Sonnenberger
     * [60ff37fcb8] Alexander Traud -- srtp: Allow zero as tag value for a
       sRTP Crypto Suite.

    Category: Channels/chan_skinny

   ASTERISK-26940: Asterisk Skinny memory exhaustion vulnerability leads to
   DoS
   Reported by: Sandro Gauci
     * [86333e8079] George Joseph -- AST-2017-004: chan_skinny: Add EOF check
       in skinny_session

    Category: Core/Bridging

   ASTERISK-24529: Using AMI Action Bridge to on an already bridged channel
   causes the incorrect return priority to be used
   Reported by: Corey Farrell
     * [8cbdd0a5b8] Joshua Colp -- bridge: Fix returning to dialplan when
       executing Bridge() from AMI.

    Category: Core/BuildSystem

   ASTERISK-26705: libasteriskssl.so not found when asterisk is installed for
   the 1st time
   Reported by: George Joseph
     * [e6087296c3] Walter Doekes -- build: Fix deb build issues with
       fakeroot

    Category: Core/General

   ASTERISK-26606: tcptls: Incorrect OpenSSL function call leads to
   misleading error report
   Reported by: Bob Ham
     * [ecd371846e] Joshua Colp -- tcptls: Improve error messages for TLS
       connections.
   ASTERISK-26528: [UBSAN] strings.h:signed integer overflow in
   ast_str_case_hash
   Reported by: Badalian Vyacheslav
     * [bc9206d539] Torrey Searle -- strings.h: Avoid overflows in the string
       hash functions
   ASTERISK-26903: Listening TCP/TLS sockets stop when temporarily out of
   open files
   Reported by: Walter Doekes
     * [866510d85b] Richard Mudgett -- tcptls.c: Cleanup TCP/TLS listener
       thread on abnormal exit.

    Category: Core/RTP

   ASTERISK-26515: rtp_engine: Allocate RTP payloads on a per-session basis
   Reported by: Joshua Colp
     * [d0649254b5] Joshua Colp -- rtp_engine: allocate RTP dynamic payloads
       per session

    Category: Documentation

   ASTERISK-26086: res_musiconhold: format option is not documented
   adequately
   Reported by: Jens BA 1/4rger
     * [63a79e395a] Sean Bright -- res_musiconhold: Document the 'format'
       option

    Category: Formats/format_ogg_vorbis

   ASTERISK-26169: format_ogg_vorbis: Memory leak using OGG in MixMonitor
   Reported by: Ivan Myalkin
     * [07e6f5806a] Sean Bright -- format_ogg_vorbis: Clear ogg/vorbis data
       structures on close

    Category: Formats/format_pcm

   ASTERISK-20984: Audible clicks when playing sox encoded au file with
   STREAM FILE AGI command
   Reported by: Roman S.
     * [ba30c8b692] Roman S. -- format_pcm: Track actual header size of .au
       files

    Category: Formats/format_wav

   ASTERISK-26613: format_wav: wav16 format read file only by 320 - half of
   frame
   Reported by: Vitaly K
     * [e24bbf318c] Sean Bright -- format_wav: Read 16khz wav samples
       properly

    Category: Functions/func_cdr

   ASTERISK-26173: func_cdr: CDR function does not permit empty values to be
   assigned
   Reported by: gkloepfer
     * [fbfce63b30] Joshua Colp -- func_cdr: Allow empty value for CDR
       dialplan function.

    Category: Functions/func_speex

   ASTERISK-26926: func_speex: Crash caused by frame with no datalen
   Reported by: Richard Kenner
     * [4cdf937a2e] Joshua Colp -- frame: Better handle interpolated frames.

    Category: General

   ASTERISK-26983: Crash in Manager Reload when TLS Config Changes
   Reported by: Joshua Elson
     * [ee019a5f77] Joshua Elson -- Prevent Undefined Capath Crash
   ASTERISK-26860: Upon RTCP reception, netsock2.c:210
   ast_sockaddr_split_hostport: Port missing in (null)
   Reported by: Evers Lab
     * [3a5683d66c] Kevin Harwell -- res_rtp_asterisk: Clearing the remote
       RTCP address causes RTCP failures

    Category: Resources/res_hep

   ASTERISK-26953: Asterisk crash if hep.conf have some missing parameters
   Reported by: Joel Vandal
     * [03fb67f027] Sean Bright -- res_hep: Add additional config
       initialization and validation

    Category: Resources/res_musiconhold

   ASTERISK-25974: Unused realtime MOH classes not purged on 'moh reload'
   Reported by: SA(c)bastien Couture
     * [ed3b0cbd2a] Daniel Journo -- Unused realtime MOH classes not purged
       on 'moh reload'
   ASTERISK-26086: res_musiconhold: format option is not documented
   adequately
   Reported by: Jens BA 1/4rger
     * [63a79e395a] Sean Bright -- res_musiconhold: Document the 'format'
       option
   ASTERISK-23996: No core dumps because of res_musiconhold chdir.
   Reported by: Walter Doekes
     * [0a8026072b] Sean Bright -- res_musiconhold: Don't chdir() when
       scanning MoH files

    Category: Resources/res_pjsip

   ASTERISK-26908: res_pjsip: The ChanIsAvail causes a res_pjsip session to
   be leaked.
   Reported by: Richard Mudgett
     * [cd4824ca69] George Joseph -- res_pjsip_session: Add cleanup to
       ast_sip_session_terminate
   ASTERISK-25823: SIGSEGV, Segmentation fault. - ../sysdeps/x86_64/strlen.S:
   No such file or directory.
   Reported by: Andreas KrA 1/4ger
     * [6722ec6a6a] Kevin Harwell -- res_pjsip/res_pjsip_callerid: NULL check
       on caller id name string
   ASTERISK-26928: pjsip: Add database tables for PUBLISH support
   Reported by: Joshua Colp
     * [7942378c55] Joshua Colp -- pjsip: Add Alembic for PUBLISH support.
   ASTERISK-26905: pjproject_bundled: Merge 3 upstream deadlock patches into
   bundled
   Reported by: Ross Beer
     * [e8cace12ba] George Joseph -- pjproject_bundled: Add 3 upstream
       patches
   ASTERISK-26916: res_pjsip: Excessive refcount reached on transport ao2
   object
   Reported by: Ross Beer
     * [7ee8ec19fd] Richard Mudgett -- res_pjsip: Fix transport ref leak.
   ASTERISK-26363: res_pjsip: Bye sent to sip trunk is not authenticated even
   after receiving a 407 error code
   Reported by: Yaacov Akiba Slama
     * [e50df8ac81] Joshua Colp -- res_pjsip_session: Allow BYE to be sent on
       disconnected session.

    Category: Resources/res_pjsip/Bundling

   ASTERISK-26927: pjproject_bundled: Crash on pj_ssl_get_info() while
   ioqueue_on_read_complete().
   Reported by: Alexander Traud
     * [884bc5f76d] Alexander Traud -- pjproject_bundled: Crash on
       pj_ssl_get_info() while ioqueue_on_read_complete().
   ASTERISK-26905: pjproject_bundled: Merge 3 upstream deadlock patches into
   bundled
   Reported by: Ross Beer
     * [e8cace12ba] George Joseph -- pjproject_bundled: Add 3 upstream
       patches

    Category: Resources/res_pjsip_caller_id

   ASTERISK-25823: SIGSEGV, Segmentation fault. - ../sysdeps/x86_64/strlen.S:
   No such file or directory.
   Reported by: Andreas KrA 1/4ger
     * [6722ec6a6a] Kevin Harwell -- res_pjsip/res_pjsip_callerid: NULL check
       on caller id name string

    Category: Resources/res_pjsip_pubsub

   ASTERISK-26929: pjsip: Add database tables for RLS
   Reported by: Joshua Colp
     * [1174b566ab] Joshua Colp -- alembic: Add table for 'resource_list'
       PJSIP RLS type.

    Category: Resources/res_pjsip_sdp_rtp

   ASTERISK-26890: STUN server with non-default-route transport causes INVITE
   delay
   Reported by: George Joseph
     * [85bdf33808] Richard Mudgett -- res_pjsip_session.c: Send 100 Trying
       out earlier to prevent retransmissions.
     * [f592947b98] Richard Mudgett -- res_rtp_asterisk.c: Add stun_blacklist
       option
   ASTERISK-26851: res_pjsip_sdp_rtp: RTP instance does not use same IP as
   explicit transport
   Reported by: Richard Begg
     * [797dfc13a9] Richard Mudgett -- res_pjsip_sdp_rtp.c: Don't use
       deprecated transport struct member.
     * [21abdc2d9a] Richard Mudgett -- res_pjsip_sdp_rtp.c: Don't alter
       global addr variable.

    Category: Resources/res_pjsip_session

   ASTERISK-26998: res_pjsip_session: INVITE retransmissions could still
   setup the same call again.
   Reported by: Richard Mudgett
     * [d7461f22d9] Richard Mudgett -- res_pjsip_session.c: Process initial
       INVITE sooner. (key exists)
   ASTERISK-26908: res_pjsip: The ChanIsAvail causes a res_pjsip session to
   be leaked.
   Reported by: Richard Mudgett
     * [cd4824ca69] George Joseph -- res_pjsip_session: Add cleanup to
       ast_sip_session_terminate

    Category: Resources/res_pjsip_t38

   ASTERISK-26974: res_pjsip: Deadlock in T.38 framehook
   Reported by: Richard Mudgett
     * [d54ae43cc8] Richard Mudgett -- res_pjsip_t38.c: Fix deadlock in T.38
       framehook.

    Category: Resources/res_rtp_asterisk

   ASTERISK-26982: chan_sip: rtcp_mux setting may cause ice completion
   failure/delay if client offers rtcp-mux as negotiable
   Reported by: Stefan EngstrAP:m
     * [48a59c5679] Sean Bright -- chan_sip: Better ICE handling for RTCP-MUX
   ASTERISK-26979: res_rtp_asterisk: SRTP unprotect failed with
   authentication failure 10 or 110
   Reported by: Javier Riveros
     * [5b5237264e] Kevin Harwell -- res_rtp_asterisk: rtcp mux using the
       wrong srtp unprotecting algorithm
   ASTERISK-26143: res_rtp_asterisk: One way audio when transcoding
   Reported by: Henning Holtschneider
     * [bf19c0e596] Vitezslav Novy -- chan_sip: Change sip_get_codec() to
       return correct codec list
   ASTERISK-26692: res_rtp_asterisk: Crash in dtls_srtp_handle_timeout at
   res_rtp_asterisk (using chan_sip)
   Reported by: scgm11
     * [f5af1a1f74] Richard Mudgett -- res_rtp_asterisk.c: Fix crash in RTCP
       DTLS operation.
   ASTERISK-26835: res_rtp_asterisk: Crash when freeing RTCP address string
   Reported by: Niklas Larsson
     * [3adb547069] Richard Mudgett -- rtp_engine/res_rtp_asterisk: Fix RTP
       struct reentrancy crashes.
   ASTERISK-26853: res_rtp_asterisk: Crash in pjnath when receiving packet
   Reported by: Adagio
     * [3adb547069] Richard Mudgett -- rtp_engine/res_rtp_asterisk: Fix RTP
       struct reentrancy crashes.

    Category: Resources/res_srtp

   ASTERISK-26979: res_rtp_asterisk: SRTP unprotect failed with
   authentication failure 10 or 110
   Reported by: Javier Riveros
     * [5b5237264e] Kevin Harwell -- res_rtp_asterisk: rtcp mux using the
       wrong srtp unprotecting algorithm

    Category: Resources/res_stun_monitor

   ASTERISK-21856: STUN never works when asterisk started without internet
   access
   Reported by: Jeremy Kister
     * [22c07f5223] Sean Bright -- res_stun_monitor: Don't fail to load if
       DNS resolution fails

    Category: Resources/res_xmpp

   ASTERISK-21009: xmpp_pubsub_unsubscribe: Could not create IQ when creating
   pubsub unsubscription on client
   Reported by: Marcello Ceschia
     * [b3fe94e4ca] Sean Bright -- astobj2: Prevent potential deadlocks with
       ao2_global_obj_release
   ASTERISK-24712: xmpp: starttls problem causes connection spew
   Reported by: Matthias Urlichs
     * [cd93488a82] Sean Bright -- res_xmpp: Use incremental backoff when a
       read error occurs
     * [a48b489de3] Sean Bright -- res_xmpp: Try to provide useful errors
       messages from OpenSSL
   ASTERISK-23510: JABBER_STATUS fails with improper code 7 for unavailable
   clients
   Reported by: Anthony Critelli
     * [57fcbb8591] Sean Bright -- res_xmpp: Correct implementation of
       JABBER_STATUS & JabberStatus
   ASTERISK-21855: Asterisk crashes when XMPP message is sent (JabberSend)
   and no internet connection is available
   Reported by: Jeremy Kister
     * [eed582888f] Sean Bright -- res_xmpp: Don't crash when trying to send
       a message without a connection
   ASTERISK-25622: WARNING for "JABBER: socket read error" should be more
   specific
   Reported by: Sean Darcy
     * [e771bf9787] Sean Bright -- res_xmpp: Include client name in
       connection related error messages

    Category: Third-Party/pjproject

   ASTERISK-26905: pjproject_bundled: Merge 3 upstream deadlock patches into
   bundled
   Reported by: Ross Beer
     * [e8cace12ba] George Joseph -- pjproject_bundled: Add 3 upstream
       patches

    Category: pjproject/pjsip

   ASTERISK-26939: Out of bound memory access in PJSIP multipart parser
   crashes Asterisk
   Reported by: Sandro Gauci
     * [04c7bd61ce] Mark Michelson -- AST-2017-003: Handle zero-length body
       parts correctly.
   ASTERISK-26938: Heap overflow in CSEQ header parsing affects Asterisk
   chan_pjsip and PJSIP
   Reported by: Sandro Gauci
     * [83f6a6a2d6] Mark Michelson -- AST-2017-002: Ensure transaction key
       buffer is large enough.
   ASTERISK-26930: pjproject/Makefile.rules for pjsip 2.6 build fails for
   non-SSE2 instrunction Linux
   Reported by: abelbeck
     * [6b15c7fc05] George Joseph -- pjproject_bundled: Add
       --disable-libwebrtc to configure
   ASTERISK-26814: pjproject_bundled build fails to download pjproject source
   when using cURL
   Reported by: Gergely DAP:msAP:di
     * [8df2f481b6] Kevin Harwell -- pjproject_bundled: raise timeout value
       used when downloading

  Improvement

    Category: Core/Sorcery

   ASTERISK-26088: Investigate heavy memory utilization by res_pjsip_pubsub
   Reported by: Richard Mudgett
     * [d7461f22d9] Richard Mudgett -- res_pjsip_session.c: Process initial
       INVITE sooner. (key exists)

    Category: Core/Stasis

   ASTERISK-26088: Investigate heavy memory utilization by res_pjsip_pubsub
   Reported by: Richard Mudgett
     * [d7461f22d9] Richard Mudgett -- res_pjsip_session.c: Process initial
       INVITE sooner. (key exists)

    Category: Resources/res_hep_rtcp

   ASTERISK-26427: res_hep_rtcp: Asterisk Master will report channel name
   with res_hep_rtcp when using chan_sip
   Reported by: Nir Simionovich (GreenfieldTech - Israel)
     * [097f90220a] Joshua Colp -- res_hep_rtcp: Provide chan_sip Call-ID for
       RTCP messages.

    Category: Resources/res_pjsip

   ASTERISK-26088: Investigate heavy memory utilization by res_pjsip_pubsub
   Reported by: Richard Mudgett
     * [d7461f22d9] Richard Mudgett -- res_pjsip_session.c: Process initial
       INVITE sooner. (key exists)

    Category: Resources/res_pjsip_pubsub

   ASTERISK-26088: Investigate heavy memory utilization by res_pjsip_pubsub
   Reported by: Richard Mudgett
     * [d7461f22d9] Richard Mudgett -- res_pjsip_session.c: Process initial
       INVITE sooner. (key exists)

    Category: Resources/res_pjsip_registrar

   ASTERISK-26088: Investigate heavy memory utilization by res_pjsip_pubsub
   Reported by: Richard Mudgett
     * [d7461f22d9] Richard Mudgett -- res_pjsip_session.c: Process initial
       INVITE sooner. (key exists)

     ----------------------------------------------------------------------

                                  Open Issues

                                 [Back to Top]

   This is a list of all open issues from the issue tracker that were
   referenced by changes that went into this release.

  Bug

    Category: Core/Bridging

   ASTERISK-26923: bridging: T.38 request is lost when channels are added to
   bridge
   Reported by: Torrey Searle
     * [443058f154] Torrey Searle -- bridging: Ensure successful T.38
       negotation

    Category: Core/Channels

   ASTERISK-26923: bridging: T.38 request is lost when channels are added to
   bridge
   Reported by: Torrey Searle
     * [443058f154] Torrey Searle -- bridging: Ensure successful T.38
       negotation

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author      | Summary                                     |
   |------------+-------------+---------------------------------------------|
   | 0a1b924030 | Kevin       | Update for 14.5.0-rc2                       |
   |            | Harwell     |                                             |
   |------------+-------------+---------------------------------------------|
   | 39df1c5a06 | Kevin       | Update for 14.5.0-rc1                       |
   |            | Harwell     |                                             |
   |------------+-------------+---------------------------------------------|
   | 0a5265fe10 | Sean Bright | res_hep_rtcp: Add support level to module   |
   |            |             | info                                        |
   |------------+-------------+---------------------------------------------|
   |            | Rodrigo     |                                             |
   | fca75547e5 | RamArez     | Fix spelling queues.conf.sample file        |
   |            | Norambuena  |                                             |
   |------------+-------------+---------------------------------------------|
   | 944f9435bc | George      | logger: Added logger_queue_limit to the     |
   |            | Joseph      | configuration options.                      |
   |------------+-------------+---------------------------------------------|
   | fe06758718 | Richard     | netsock2.c: Made get/set addr port avoid    |
   |            | Mudgett     | potential uninitialized memory.             |
   |------------+-------------+---------------------------------------------|
   | 7f5ce428ed | Sean Bright | cleanup: Change severity of fread           |
   |            |             | short-read warning                          |
   |------------+-------------+---------------------------------------------|
   | d9549bc475 | George      | res_pjsip_outbound_authenticator_digest:    |
   |            | Joseph      | Add context to log messages                 |
   |------------+-------------+---------------------------------------------|
   | 00001443dc | Kevin       | vector: defaults and indexes                |
   |            | Harwell     |                                             |
   |------------+-------------+---------------------------------------------|
   | 4cb1458245 | Sean Bright | cleanup: Fix fread() and fwrite() error     |
   |            |             | handling                                    |
   |------------+-------------+---------------------------------------------|
   | d757a70156 | Sean Bright | core: Use eventfd for alert pipes on Linux  |
   |            |             | when possible                               |
   |------------+-------------+---------------------------------------------|
   | 47bc32173f | Richard     | res_pjsip_session.c: Restructure            |
   |            | Mudgett     | ast_sip_session_alloc()                     |
   |------------+-------------+---------------------------------------------|
   | 6bbccb0dfd | Sean Bright | pbx: Use same thread if                     |
   |            |             | AST_OUTGOING_WAIT_COMPLETE specified        |
   |------------+-------------+---------------------------------------------|
   | b0b309d023 | Sean Bright | build: Update config.guess and config.sub   |
   |------------+-------------+---------------------------------------------|
   | 26780e6da4 | George      | make ari-stubs so doc periodic jobs can run |
   |            | Joseph      |                                             |
   |------------+-------------+---------------------------------------------|
   | 9464bc3f08 | Richard     | Revert "bridging: Ensure successful T.38    |
   |            | Mudgett     | negotation"                                 |
   |------------+-------------+---------------------------------------------|
   | 2c5aaeed09 | George      | modules: change module LOAD_FAILUREs to     |
   |            | Joseph      | LOAD_DECLINES (14)                          |
   |------------+-------------+---------------------------------------------|
   | cc668bd522 | George      | modules: change module LOAD_FAILUREs to     |
   |            | Joseph      | LOAD_DECLINES                               |
   |------------+-------------+---------------------------------------------|
   | 3408561eb7 | Richard     | stun.c: Fix ast_stun_request() erratic      |
   |            | Mudgett     | timeout.                                    |
   |------------+-------------+---------------------------------------------|
   | 5bf425840e | Richard     | sorcery.c: Speed up                         |
   |            | Mudgett     | ast_sorcery_retrieve_by_id()                |
   |------------+-------------+---------------------------------------------|
   | 63560ae9b2 | Richard     | res_pjsip: Fix pointer use after unref.     |
   |            | Mudgett     |                                             |
   |------------+-------------+---------------------------------------------|
   | 09252e9d59 | Walter      | samples: Undo removal of include from       |
   |            | Doekes      | canonicalize-app-names commit.              |
   |------------+-------------+---------------------------------------------|
   | c5533488cc | Walter      | samples: Canonicalize app names in          |
   |            | Doekes      | extensions.conf.sample.                     |
   |------------+-------------+---------------------------------------------|
   | baf7660c7b | George      | sample_config: Add samples for pubsub to    |
   |            | Joseph      | pjsip.conf.sample                           |
   |------------+-------------+---------------------------------------------|
   | 56f9193e6b | Corey       | Forward declare 'struct ast_json' in        |
   |            | Farrell     | asterisk.h                                  |
   |------------+-------------+---------------------------------------------|
   | 451f7e00a6 | Corey       | CEL: Remove header declarations of          |
   |            | Farrell     | non-existant functions.                     |
   |------------+-------------+---------------------------------------------|
   | 27344675be | George      | res_pjsip_config_wizard: Add 2 new          |
   |            | Joseph      | parameters to help with proxy config        |
   |------------+-------------+---------------------------------------------|
   | b409d49273 | Sean Bright | alembic: Turn off execute bit on            |
   |            |             | non-executable python scripts               |
   |------------+-------------+---------------------------------------------|
   | 11f3b6e17f | Richard     | Add DTLS sanity check.                      |
   |            | Mudgett     |                                             |
   |------------+-------------+---------------------------------------------|
   | b033b74118 | Sean Bright | core: Remove embedded module support        |
   |------------+-------------+---------------------------------------------|
   | 701a03738b | Sean Bright | res_pjsip_sdp_rtp: Set hangup cause for RTP |
   |            |             | timeouts                                    |
   |------------+-------------+---------------------------------------------|
   | 606103580f | Sean Bright | res_xmpp: Fix ref counting issue            |
   |------------+-------------+---------------------------------------------|
   | 138f2bfa82 | Sean Bright | res_xmpp: Correctly check return value of   |
   |            |             | SSL_connect                                 |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 asterisk-14.4.0-summary.html                                                                |  379 --
 asterisk-14.4.0-summary.txt                                                                 |  984 -------
 b/.version                                                                                  |    2
 b/CHANGES                                                                                   |   47
 b/ChangeLog                                                                                 | 1395 +++++++++-
 b/Makefile                                                                                  |   39
 b/Makefile.moddir_rules                                                                     |   43
 b/Makefile.rules                                                                            |   12
 b/UPGRADE.txt                                                                               |    7
 b/addons/Makefile                                                                           |    2
 b/addons/cdr_mysql.c                                                                        |   43
 b/addons/chan_mobile.c                                                                      |   11
 b/addons/format_mp3.c                                                                       |    8
 b/apps/app_adsiprog.c                                                                       |    2
 b/apps/app_agent_pool.c                                                                     |    5
 b/apps/app_alarmreceiver.c                                                                  |    2
 b/apps/app_authenticate.c                                                                   |    2
 b/apps/app_cdr.c                                                                            |    5
 b/apps/app_confbridge.c                                                                     |    6
 b/apps/app_dahdiras.c                                                                       |    2
 b/apps/app_forkcdr.c                                                                        |    6
 b/apps/app_minivm.c                                                                         |   14
 b/apps/app_queue.c                                                                          |    6
 b/apps/app_voicemail.c                                                                      |   16
 b/apps/app_zapateller.c                                                                     |    2
 b/apps/confbridge/conf_config_parser.c                                                      |    4
 b/asterisk-14.5.0-rc2-summary.html                                                          |   18
 b/asterisk-14.5.0-rc2-summary.txt                                                           |  103
 b/build_tools/cflags.xml                                                                    |    4
 b/cdr/cdr_custom.c                                                                          |    4
 b/cdr/cdr_pgsql.c                                                                           |   56
 b/cel/cel_custom.c                                                                          |    7
 b/cel/cel_odbc.c                                                                            |   90
 b/cel/cel_pgsql.c                                                                           |   27
 b/channels/chan_alsa.c                                                                      |   46
 b/channels/chan_dahdi.c                                                                     |   12
 b/channels/chan_iax2.c                                                                      |   33
 b/channels/chan_mgcp.c                                                                      |   10
 b/channels/chan_motif.c                                                                     |    2
 b/channels/chan_nbs.c                                                                       |    4
 b/channels/chan_oss.c                                                                       |   57
 b/channels/chan_phone.c                                                                     |    6
 b/channels/chan_pjsip.c                                                                     |   11
 b/channels/chan_sip.c                                                                       |   94
 b/channels/chan_skinny.c                                                                    |  128
 b/channels/chan_unistim.c                                                                   |    2
 b/codecs/Makefile                                                                           |    6
 b/codecs/codec_a_mu.c                                                                       |    2
 b/codecs/codec_adpcm.c                                                                      |    2
 b/codecs/codec_alaw.c                                                                       |    2
 b/codecs/codec_g722.c                                                                       |    2
 b/codecs/codec_g726.c                                                                       |    2
 b/codecs/codec_gsm.c                                                                        |    2
 b/codecs/codec_ilbc.c                                                                       |    2
 b/codecs/codec_lpc10.c                                                                      |    2
 b/codecs/codec_resample.c                                                                   |    4
 b/codecs/codec_ulaw.c                                                                       |    2
 b/config.guess                                                                              |  184 -
 b/config.sub                                                                                |   90
 b/configs/samples/asterisk.conf.sample                                                      |    4
 b/configs/samples/extconfig.conf.sample                                                     |    3
 b/configs/samples/extensions.conf.sample                                                    |   44
 b/configs/samples/hep.conf.sample                                                           |    6
 b/configs/samples/logger.conf.sample                                                        |    8
 b/configs/samples/musiconhold.conf.sample                                                   |    6
 b/configs/samples/pjsip.conf.sample                                                         |  141 +
 b/configs/samples/pjsip_wizard.conf.sample                                                  |   12
 b/configs/samples/queues.conf.sample                                                        |    4
 b/configs/samples/rtp.conf.sample                                                           |   19
 b/configs/samples/sorcery.conf.sample                                                       |    9
 b/configure                                                                                 |  218 +
 b/configure.ac                                                                              |   36
 b/contrib/ast-db-manage/config/versions/1d0e332c32af_create_rls_table.py                    |   39
 b/contrib/ast-db-manage/config/versions/2da192dbbc65_add_publish_tables.py                  |   73
 b/contrib/realtime/mssql/mssql_config.sql                                                   |   86
 b/contrib/realtime/mysql/mysql_config.sql                                                   |   62
 b/contrib/realtime/oracle/oracle_config.sql                                                 |   86
 b/contrib/realtime/postgresql/postgresql_config.sql                                         |   62
 b/formats/format_g719.c                                                                     |   12
 b/formats/format_g723.c                                                                     |   15
 b/formats/format_g726.c                                                                     |   35
 b/formats/format_g729.c                                                                     |   14
 b/formats/format_gsm.c                                                                      |   18
 b/formats/format_h263.c                                                                     |   18
 b/formats/format_h264.c                                                                     |   18
 b/formats/format_ilbc.c                                                                     |   14
 b/formats/format_jpeg.c                                                                     |    2
 b/formats/format_ogg_speex.c                                                                |   21
 b/formats/format_ogg_vorbis.c                                                               |   20
 b/formats/format_pcm.c                                                                      |  101
 b/formats/format_siren14.c                                                                  |   12
 b/formats/format_siren7.c                                                                   |   12
 b/formats/format_sln.c                                                                      |   43
 b/formats/format_vox.c                                                                      |   16
 b/formats/format_wav.c                                                                      |   65
 b/formats/format_wav_gsm.c                                                                  |   16
 b/funcs/func_cdr.c                                                                          |    7
 b/funcs/func_holdintercept.c                                                                |    2
 b/funcs/func_talkdetect.c                                                                   |    2
 b/include/asterisk.h                                                                        |    1
 b/include/asterisk/alertpipe.h                                                              |  159 +
 b/include/asterisk/astobj2.h                                                                |    4
 b/include/asterisk/autoconfig.h.in                                                          |    8
 b/include/asterisk/cel.h                                                                    |   23
 b/include/asterisk/channel.h                                                                |   11
 b/include/asterisk/logger.h                                                                 |   23
 b/include/asterisk/module.h                                                                 |   66
 b/include/asterisk/options.h                                                                |    1
 b/include/asterisk/res_pjsip_session.h                                                      |    4
 b/include/asterisk/stasis_app.h                                                             |    1
 b/include/asterisk/stasis_channels.h                                                        |    1
 b/include/asterisk/stasis_endpoints.h                                                       |    1
 b/include/asterisk/stasis_system.h                                                          |    1
 b/include/asterisk/strings.h                                                                |   44
 b/include/asterisk/vector.h                                                                 |   62
 b/main/Makefile                                                                             |   19
 b/main/alertpipe.c                                                                          |  166 +
 b/main/asterisk.c                                                                           |   11
 b/main/astobj2.c                                                                            |   20
 b/main/audiohook.c                                                                          |   11
 b/main/bridge_channel.c                                                                     |   87
 b/main/cdr.c                                                                                |    4
 b/main/channel.c                                                                            |   12
 b/main/channel_internal_api.c                                                               |  121
 b/main/config_options.c                                                                     |    5
 b/main/features.c                                                                           |    8
 b/main/http.c                                                                               |   23
 b/main/loader.c                                                                             |   95
 b/main/logger.c                                                                             |  192 -
 b/main/manager.c                                                                            |   14
 b/main/netsock2.c                                                                           |   25
 b/main/pbx.c                                                                                |   76
 b/main/rtp_engine.c                                                                         |  774 ++++-
 b/main/sorcery.c                                                                            |   10
 b/main/stun.c                                                                               |   11
 b/main/tcptls.c                                                                             |   94
 b/main/translate.c                                                                          |    6
 b/main/utils.c                                                                              |    3
 b/makeopts.in                                                                               |    5
 b/res/res_ari.c                                                                             |   51
 b/res/res_ari_applications.c                                                                |   19
 b/res/res_ari_asterisk.c                                                                    |   19
 b/res/res_ari_bridges.c                                                                     |   19
 b/res/res_ari_channels.c                                                                    |   19
 b/res/res_ari_device_states.c                                                               |   19
 b/res/res_ari_endpoints.c                                                                   |   19
 b/res/res_ari_events.c                                                                      |   33
 b/res/res_ari_mailboxes.c                                                                   |   19
 b/res/res_ari_model.c                                                                       |    2
 b/res/res_ari_playbacks.c                                                                   |   19
 b/res/res_ari_recordings.c                                                                  |   19
 b/res/res_ari_sounds.c                                                                      |   19
 b/res/res_calendar.c                                                                        |    6
 b/res/res_chan_stats.c                                                                      |   23
 b/res/res_config_sqlite.c                                                                   |   16
 b/res/res_config_sqlite3.c                                                                  |    6
 b/res/res_endpoint_stats.c                                                                  |    2
 b/res/res_hep.c                                                                             |   34
 b/res/res_hep_rtcp.c                                                                        |   21
 b/res/res_http_media_cache.c                                                                |    4
 b/res/res_http_websocket.c                                                                  |    2
 b/res/res_limit.c                                                                           |    2
 b/res/res_musiconhold.c                                                                     |   39
 b/res/res_pjsip.c                                                                           |   12
 b/res/res_pjsip/config_transport.c                                                          |   19
 b/res/res_pjsip_caller_id.c                                                                 |    9
 b/res/res_pjsip_config_wizard.c                                                             |   38
 b/res/res_pjsip_nat.c                                                                       |    4
 b/res/res_pjsip_one_touch_record_info.c                                                     |    2
 b/res/res_pjsip_outbound_authenticator_digest.c                                             |   80
 b/res/res_pjsip_outbound_publish.c                                                          |    2
 b/res/res_pjsip_outbound_registration.c                                                     |    8
 b/res/res_pjsip_publish_asterisk.c                                                          |    2
 b/res/res_pjsip_pubsub.c                                                                    |   12
 b/res/res_pjsip_sdp_rtp.c                                                                   |   46
 b/res/res_pjsip_send_to_voicemail.c                                                         |    2
 b/res/res_pjsip_session.c                                                                   |  254 -
 b/res/res_pjsip_t38.c                                                                       |   32
 b/res/res_rtp_asterisk.c                                                                    | 1054 +++++--
 b/res/res_smdi.c                                                                            |    4
 b/res/res_srtp.c                                                                            |    4
 b/res/res_stasis.c                                                                          |    4
 b/res/res_stasis_device_state.c                                                             |    5
 b/res/res_stasis_playback.c                                                                 |    5
 b/res/res_stasis_recording.c                                                                |    5
 b/res/res_stasis_test.c                                                                     |    2
 b/res/res_statsd.c                                                                          |    3
 b/res/res_stun_monitor.c                                                                    |   12
 b/res/res_xmpp.c                                                                            |  158 -
 b/rest-api-templates/res_ari_resource.c.mustache                                            |   41
 b/tests/test_bucket.c                                                                       |    2
 b/tests/test_channel_feature_hooks.c                                                        |    2
 b/tests/test_logger.c                                                                       |   67
 b/tests/test_media_cache.c                                                                  |    2
 b/tests/test_vector.c                                                                       |   19
 b/third-party/Makefile                                                                      |    2
 b/third-party/pjproject/Makefile                                                            |    4
 b/third-party/pjproject/Makefile.rules                                                      |    1
 b/third-party/pjproject/configure.m4                                                        |    1
 b/third-party/pjproject/patches/0035-r5572-svn-backport-dialog-transaction-deadlock.patch   |   32
 b/third-party/pjproject/patches/0036-r5573-svn-backport-ua-pjsua-transaction-deadlock.patch |  119
 b/third-party/pjproject/patches/0037-r5576-svn-backport-session-timer-crash.patch           |   72
 b/third-party/pjproject/patches/0048-r5576-svn-backport-tls-crash.patch                     |   17
 build_tools/embed_modules.xml                                                               |   46
 204 files changed, 6636 insertions(+), 3643 deletions(-)
