                                Release Summary

                         asterisk-certified/13.1-cert3

                                Date: 2016-02-03

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release has been made to address one or more security vulnerabilities
   that have been identified. A security advisory document has been published
   for each vulnerability that includes additional information. Users of
   versions of Asterisk that are affected are strongly encouraged to review
   the advisories and determine what action they should take to protect their
   systems from these issues.

   Security Advisories:

     * AST-2016-001,AST-2016-002,AST-2016-003

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-certified/13.1-cert2.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                            Testers         Reporters                
   48 Mark Michelson                 3 gtjoseph      25 Mark Michelson        
   47 Richard Mudgett                1 Juergen Spies 22 Matt Jordan           
   38 Joshua Colp                                    22 Mark Michelson        
   17 Kevin Harwell                                  21 Joshua Colp           
   13 Matt Jordan                                    18 Richard Mudgett       
   8 Jonathan Rose                                   10 Kevin Harwell         
   5 gtjoseph                                        9 John Hardin            
   3 Ashley Sanders                                  6 Jonathan Rose          
   3 Kevin Harwell                                   5 Chet Stevens           
   2 Corey Farrell                                   5 Richard Mudgett        
   1 Alec Davis                                      4 Jonathan Rose          
   1 Scott Griepentrog                               4 Michael Keuter         
   1 yaron nahum (License 6676)                      4 Chet Stevens           
   1 Maciej Szmigiero (license 6085)                 3 Zane Conkle            
   1 Juergen Spies (License 6698)                    3 Corey Farrell          
   1 Steve Davies                                    3 Joshua Colp            
                                                     3 Zane Conkle            
                                                     2 John Bigelow           
                                                     2 warren smith           
                                                     2 Carl Fortin            
                                                     2 Carl Fortin            
                                                     2 Sean Pimental          
                                                     1 David Justl            
                                                     1 Walter Doekes          
                                                     1 Denis Alberto Martinez 
                                                     1 Etienne Lessard        
                                                     1 Alexandr Gordeev       
                                                     1 David Justl            
                                                     1 yaron nahum            
                                                     1 warren smith           
                                                     1 Ray Crumrine           
                                                     1 Scott Griepentrog      
                                                     1 viniciusfontes         
                                                     1 Ashley Sanders         
                                                     1 Krzysztof Trempala     
                                                     1 Walter Doekes          
                                                     1 Ashley Sanders         
                                                     1 Maciej Szmigiero       
                                                     1 Ilya Trikoz            
                                                     1 Hiroaki Komatsu        
                                                     1 snuffy                 
                                                     1 David Brillert         
                                                     1 Alexander Traud        
                                                     1 Kevin Harwell          
                                                     1 Alex A. Welzl          
                                                     1 Krzysztof Trempala     
                                                     1 Badalian Vyacheslav    
                                                     1 Artem Volodin          
                                                     1 Etienne Lessard        
                                                     1 Artem Volodin          
                                                     1 Alec Davis             
                                                     1 Brad Latus             
                                                     1 Juergen Spies          
                                                     1 Ray Crumrine           
                                                     1 Ilya Trikoz            
                                                     1 Dmitriy Serov          
                                                     1 Alexander Traud        
                                                     1 John Bigelow           
                                                     1 yaron nahum            
                                                     1 Aleksandr Gordeev      
                                                     1 Torrey Searle          
                                                     1 David Brillert         
                                                     1 Juergen Spies          
                                                     1 Peter Katzmann         

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Improvement

    Category: Applications/app_stasis

   ASTERISK-24802: stasis: set a channel variable on websocket disconnect
   error
   Reported by: Kevin Harwell
     * [758fead630] Ashley Sanders -- stasis: set a channel variable on
       websocket disconnect error

    Category: Channels/chan_pjsip

   ASTERISK-24862: [patch] Support in-dialog OPTIONS
   Reported by: yaron nahum
     * [39fe210fd9] yaron nahum -- res/res_pjsip_dlg_options: Add a module to
       handle in-dialog OPTIONS requests

    Category: Core/General

   ASTERISK-25518: taskprocessor: Add high water mark
   Reported by: Jonathan Rose
     * [b9713354dc] Jonathan Rose -- taskprocessor: Add high water mark
       warnings

    Category: Core/Sorcery

   ASTERISK-25067: Sorcery Caching: Implement a new caching module
   Reported by: Matt Jordan
     * [e0cd8216bb] Joshua Colp -- res_sorcery_memory_cache: Remove
       'prefetch' option.
     * [8b2bad7740] Joshua Colp -- test_sorcery_memory_cache_thrash: Add unit
       tests for thrashing the memory cache.
     * [8575c4f18d] Joshua Colp -- res_sorcery_memory_cache: Implement
       expire_on_reload option.
     * [da52527136] Joshua Colp -- res_sorcery_memory_cache: Add test event
       when a refresh occurs.
     * [f596b4a85c] Joshua Colp -- res_sorcery_memory_cache: Add CLI commands
       and AMI actions.
     * [9c2de310be] Mark Michelson -- res_sorcery_memory_cache: Add support
       for refreshing stale objects.
     * [9a7fccc50c] Joshua Colp -- res_sorcery_memory_cache: Add support for
       object_lifetime_maximum.
     * [9ae9221d2b] Mark Michelson -- res_sorcery_memory_cache: Add support
       for maximum_objects.
     * [e4d42119b5] Joshua Colp -- res_sorcery_memory_cache: Add basic module
       implementation.

    Category: Resources/res_ari

   ASTERISK-24802: stasis: set a channel variable on websocket disconnect
   error
   Reported by: Kevin Harwell
     * [758fead630] Ashley Sanders -- stasis: set a channel variable on
       websocket disconnect error

  Bug

    Category: Addons/General

   ASTERISK-25640: pbx: Deadlock on features reload and state change hint.
   Reported by: Krzysztof Trempala
     * [bb29802615] Kevin Harwell -- pbx: Deadlock between contexts container
       and context_merge locks

    Category: Applications/app_chanspy

   ASTERISK-24828: Fix Frame Leaks
   Reported by: Kevin Harwell
     * [3b4ba353f0] Kevin Harwell -- app_chanspy, channel: fix frame leaks

    Category: Applications/app_confbridge

   ASTERISK-24841: ConfBridge: Strange sampling rates chosen when channels
   have multiple native formats
   Reported by: Matt Jordan
     * [b17d0953b6] Matt Jordan -- res/res_pjsip_sdp_rtp: Revert portion of
       r432195

    Category: Applications/app_dial

   ASTERISK-24958: Forwarding loop detection inhibits certain desirable
   scenarios
   Reported by: Mark Michelson
     * [457d8dc124] Alec Davis -- app_queue: (try_calling): mutex 'qe->chan'
       freed more times than we've locked!
     * [1bb6122f35] Mark Michelson -- Detect potential forwarding loops based
       on count.
   ASTERISK-25423: Caller gets no Connected line update during call pickup.
   Reported by: Richard Mudgett
     * [00be2f6b4f] Richard Mudgett -- app_queue.c: Force COLP update if
       outgoing channel name changed.
     * [bd43638622] Richard Mudgett -- app_queue.c: Factor out a connected
       line update routine.
     * [f5a935f9d1] Richard Mudgett -- app_dial.c: Make 'A' option pass COLP
       updates.
     * [91f754cb89] Richard Mudgett -- app_dial.c: Force COLP update if
       outgoing channel name changed.
     * [9792b21720] Richard Mudgett -- app_dial.c: Factor out a connected
       line update routine.

    Category: Applications/app_directory

   ASTERISK-25087: Asterisk segfault when using Directory application with
   alias option and specific mailbox configuration
   Reported by: Chet Stevens
     * [8142b922ab] Richard Mudgett -- app_directory: Fix crash when using
       the alias option 'a'.

    Category: Applications/app_mixmonitor

   ASTERISK-25322: Crash occurs when using MixMonitor with t() or r()
   options.
   Reported by: Richard Mudgett
     * [fb347a4ded] Richard Mudgett -- audiohook.c: Fix MixMonitor crash when
       using the r() or t() options.

    Category: Applications/app_page

   ASTERISK-25384: Regular Asterisk crashes when using Page application.
   "user_data is NULL"
   Reported by: Chet Stevens
     * [86eee104be] Richard Mudgett -- app_page.c: Fix crash when forwarding
       with a predial handler.

    Category: Applications/app_queue

   ASTERISK-25561: app_queue.c line 6503 (try_calling): mutex 'qe->chan'
   freed more times than we've locked!
   Reported by: Alec Davis
     * [457d8dc124] Alec Davis -- app_queue: (try_calling): mutex 'qe->chan'
       freed more times than we've locked!
   ASTERISK-25423: Caller gets no Connected line update during call pickup.
   Reported by: Richard Mudgett
     * [00be2f6b4f] Richard Mudgett -- app_queue.c: Force COLP update if
       outgoing channel name changed.
     * [bd43638622] Richard Mudgett -- app_queue.c: Factor out a connected
       line update routine.
     * [f5a935f9d1] Richard Mudgett -- app_dial.c: Make 'A' option pass COLP
       updates.
     * [91f754cb89] Richard Mudgett -- app_dial.c: Force COLP update if
       outgoing channel name changed.
     * [9792b21720] Richard Mudgett -- app_dial.c: Factor out a connected
       line update routine.

    Category: Applications/app_record

   ASTERISK-25410: app_record: RECORDED_FILE variable not being populated
   Reported by: Kevin Harwell
     * [43e6804b0c] Kevin Harwell -- app_record: RECORDED_FILE variable not
       being populated

    Category: Applications/app_voicemail

   ASTERISK-25082: Asterisk deletes message after doing a playback of an
   INBOX message using ast_vm_play when the Old folder is full for that
   mailbox.
   Reported by: Jonathan Rose
     * [b81353a0ec] Jonathan Rose -- app_voicemail: fix moving when old
       messages full

    Category: Bridges/bridge_native_rtp

   ASTERISK-25240: bridge_native_rtp: Direct media wrongfully started when
   completing attended transfer
   Reported by: Joshua Colp
     * [23b7b109c2] Joshua Colp -- bridge_native_rtp.c: Don't start native
       RTP bridging after attended transfer.

    Category: Channels/General

   ASTERISK-25025: Periodic crashes (in ast_channel_snapshot_create at
   stasis_channels.c) with Certified Asterisk 13.
   Reported by: Chet Stevens
     * [7c687c8e54] Joshua Colp -- stasis: Fix dial masquerade datastore
       lifetime
     * [c6c06bbe70] Mark Michelson -- Prevent potential crash on blond
       transfer.

    Category: Channels/chan_dahdi

   ASTERISK-25315: DAHDI channels send shortened duration DTMF tones.
   Reported by: Richard Mudgett
     * [6b219a866c] Richard Mudgett -- chan_dahdi.c: Flush the DAHDI write
       buffer after starting DTMF.
     * [fc4455216a] Richard Mudgett -- chan_dahdi.c: Lock private struct for
       ast_write().
   ASTERISK-21893: Segfault after call hangup, in
   ast_channel_hangupcause_set, at channel_internal_api.c
   Reported by: Aleksandr Gordeev
     * [523fab02d8] Richard Mudgett -- chan_dahdi/sig_pri: Fix crash on ISDN
       call hangup collision.
   ASTERISK-24869: Asterisk segfaults on DAHDI attended transfer due to
   application (appl) being NULL on unbridged channel
   Reported by: viniciusfontes
     * [b764454d4d] Kevin Harwell -- bridge.c: NULL app causes crash during
       attended transfer
   ASTERISK-19608: Asterisk-1.8.x starts rejecting calls with cause code 44
   after some time.
   Reported by: Denis Alberto Martinez
     * [0602409c89] Richard Mudgett -- chan_dahdi: Add the chan_dahdi.conf
       force_restart_unavailable_chans option.
   ASTERISK-25034: chan_dahdi: Some telco switches occasionally ignore ISDN
   RESTART requests.
   Reported by: Richard Mudgett
     * [0602409c89] Richard Mudgett -- chan_dahdi: Add the chan_dahdi.conf
       force_restart_unavailable_chans option.

    Category: Channels/chan_local

   ASTERISK-25250: chan_sip - Despite the channel being answered, caller on a
   call established via Local channel continues to hear ringback
   Reported by: Etienne Lessard
     * [74d6ae20cb] Mark Michelson -- Local channels: Alternate solution to
       ringback problem.

    Category: Channels/chan_pjsip

   ASTERISK-25183: PJSIP: Crash on NULL channel in
   chan_pjsip_incoming_response despite previous checks for NULL channel
   Reported by: Matt Jordan
     * [813b743baa] Richard Mudgett -- res_pjsip: Need to use the same
       serializer for a pjproject SIP transaction.
   ASTERISK-25404: segfault/crash in chan_pjsip_hangup ... at chan_pjsip.c
   Reported by: Chet Stevens
     * [c4f63952fc] Richard Mudgett -- chan_pjsip: Fix crash on reINVITE
       before initial INVITE completes.
   ASTERISK-25091: Asterisk REST API - bridge.addChannel crash asterisk when
   calling channel hangup while adding to bridge
   Reported by: Ilya Trikoz
     * [deccd2ef3c] Mark Michelson -- Resolve race conditions involving
       Stasis bridges.
   ASTERISK-25258: chan_pjsip: Incorrect format switch on received RTP packet
   Reported by: Joshua Colp
     * [1b744ab684] Joshua Colp -- chan_pjsip: Don't change formats when
       frame of unsupported format is received.
   ASTERISK-24933: T38 fails negotiation
   Reported by: Jonathan Rose
     * [918ca7dd36] Jonathan Rose -- res_pjsip_t38: Fix FAX failures when
       using PJSIP with authentication

    Category: Channels/chan_sip/General

   ASTERISK-25397: [patch]chan_sip: File descriptor leak with non-default
   timert1
   Reported by: Alexander Traud
     * [c7ab026196] Richard Mudgett -- AST-2016-002 chan_sip.c: Fix
       retransmission timeout integer overflow.
   ASTERISK-25364: [patch]Issue a TCP connection(kernel) and thread of
   asterisk is not released
   Reported by: Hiroaki Komatsu
     * [4e5aec3f0a] Jonathan Rose -- chan_sip: Add TCP/TLS keepalive to
       TCP/TLS server
   ASTERISK-25476: chan_sip loses registrations after a while
   Reported by: Michael Keuter
     * [a164f2ce7f] Richard Mudgett -- sched.c: Make not return a sched id of
       0.
     * [a24db35ae3] Richard Mudgett -- Audit improper usage of scheduler
       exposed by 5c713fdf18f. (v13 additions)
     * [bea904e001] Richard Mudgett -- Audit improper usage of scheduler
       exposed by 5c713fdf18f.
     * [d760c21038] Steve Davies -- Further fixes to improper usage of
       scheduler
   ASTERISK-25250: chan_sip - Despite the channel being answered, caller on a
   call established via Local channel continues to hear ringback
   Reported by: Etienne Lessard
     * [74d6ae20cb] Mark Michelson -- Local channels: Alternate solution to
       ringback problem.
   ASTERISK-25346: chan_sip: Overwriting answered elsewhere hangup cause on
   call pickup
   Reported by: Joshua Colp
     * [54a09e4cb5] Joshua Colp -- chan_sip: Allow call pickup to set the
       hangup cause.

    Category: Channels/chan_sip/Security Framework

   ASTERISK-25320: chan_sip.c: sip_report_security_event searches for wrong
   or non existent peer on invite
   Reported by: Kevin Harwell
     * [a5049df640] Kevin Harwell -- chan_sip.c: wrong peer searched in
       sip_report_security_event

    Category: Channels/chan_sip/TCP-TLS

   ASTERISK-24847: [security] [patch] tcptls: certificate CN NULL byte prefix
   bug
   Reported by: Matt Jordan
     * [08945a5c77] Maciej Szmigiero -- Security/tcptls: MitM Attack
       potential from certificate with NULL byte in CN.

    Category: Core/Bridging

   ASTERISK-25600: bridging: Inconsistency in BRIDGEPEER
   Reported by: Jonathan Rose
     * [1ec791a3ba] Jonathan Rose -- Unset BRIDGEPEER when leaving a bridge
   ASTERISK-25250: chan_sip - Despite the channel being answered, caller on a
   call established via Local channel continues to hear ringback
   Reported by: Etienne Lessard
     * [74d6ae20cb] Mark Michelson -- Local channels: Alternate solution to
       ringback problem.
   ASTERISK-25341: bridge: Hangups may get lost when executing actions
   Reported by: Joshua Colp
     * [ad4e895928] Joshua Colp -- bridge: Kick channel from bridge if hung
       up during action.
   ASTERISK-25157: bridging: Performing a blonde transfer does not result in
   connected line updates
   Reported by: Joshua Colp
     * [75589c4a3b] Joshua Colp -- bridge: When performing a blonde transfer
       update connected line information.
   ASTERISK-24869: Asterisk segfaults on DAHDI attended transfer due to
   application (appl) being NULL on unbridged channel
   Reported by: viniciusfontes
     * [b764454d4d] Kevin Harwell -- bridge.c: NULL app causes crash during
       attended transfer
   ASTERISK-24752: Crash in bridge_manager_service_req when bridge is
   destroyed by ARI during shutdown
   Reported by: Richard Mudgett
     * [340588c721] Richard Mudgett -- HTTP: Stop accepting requests on final
       system shutdown.

    Category: Core/Bridging/bridge_basic

   ASTERISK-25696: bridge_basic: don't cache xferfailsound during a transfer
   Reported by: Kevin Harwell
     * [6e18a60a47] Kevin Harwell -- bridge_basic: don't cache xferfailsound
       during an attended transfer

    Category: Core/BuildSystem

   ASTERISK-24954: Git migration: Asterisk version numbers are incompatible
   with the Test Suite
   Reported by: Matt Jordan
     * [735bea479a] Matt Jordan -- build_tools/make_version: Update version
       parsing for Git migration

    Category: Core/CallCompletionSupplementaryServices

   ASTERISK-24142: CCSS: crash during shutdown due to device lookup in
   destroyed container
   Reported by: David Brillert
     * [cdd2d5b484] Corey Farrell -- Replace most uses of ast_register_atexit
       with ast_register_cleanup.

    Category: Core/Channels

   ASTERISK-25690: Hanging up when executing connected line sub does not
   cause hangup
   Reported by: Joshua Colp
     * [def98bb996] Joshua Colp -- app: Queue hangup if channel is hung up
       during sub or macro execution.
   ASTERISK-24828: Fix Frame Leaks
   Reported by: Kevin Harwell
     * [3b4ba353f0] Kevin Harwell -- app_chanspy, channel: fix frame leaks

    Category: Core/CodecInterface

   ASTERISK-25172: Crash in channels/sip/sip blind transfer/caller_refer_only
   test in ast_format_cap_append_from_cap during ast_request
   Reported by: Matt Jordan
     * [ac9432fdb6] Joshua Colp -- app_dial: Hold reference to calling
       channel formats when dialing outbound.

    Category: Core/Configuration

   ASTERISK-25725: core: Incorrect XML documentation may result in weird
   behavior
   Reported by: Joshua Colp
     * [7d581b32e9] Joshua Colp -- config: Allow options to register when
       documentation is unavailable.

    Category: Core/General

   ASTERISK-25449: main/sched: Regression introduced by 5c713fdf18f causes
   erroneous duplicate RTCP messages; other potential scheduling issues in
   chan_sip/chan_skinny
   Reported by: Matt Jordan
     * [d760c21038] Steve Davies -- Further fixes to improper usage of
       scheduler
     * [0fe83cad51] Matt Jordan -- res/res_rtp_asterisk: Fix assignment after
       ao2 decrement
     * [d61da57428] Matt Jordan -- Fix improper usage of scheduler exposed by
       5c713fdf18f
   ASTERISK-25546: threadpool: Race condition between idle timeout and
   activation
   Reported by: Joshua Colp
     * [d073cb4b6d] Joshua Colp -- threadpool: Handle worker thread
       transitioning to dead when going active.
   ASTERISK-24881: ast_register_atexit should only be used when absolutely
   needed
   Reported by: Corey Farrell
     * [cdd2d5b484] Corey Farrell -- Replace most uses of ast_register_atexit
       with ast_register_cleanup.
   ASTERISK-25418: On-hold channels redirected out of a bridge appear to
   still be on hold
   Reported by: Mark Michelson
     * [7a4581a41b] Mark Michelson -- Do not swallow frames on channels
       leaving bridges.
   ASTERISK-25083: Message.c: Message channel becomes saturated with frames
   leading to spammy log messages
   Reported by: Jonathan Rose
     * [42c40b59b6] Jonathan Rose -- Message.c: Clear message channel frames
       on cleanup
   ASTERISK-25355: sched: ast_sched_del may return prematurely due to
   spurious wakeup
   Reported by: Joshua Colp
     * [06d42fede3] Joshua Colp -- sched: ast_sched_del may return
       prematurely due to spurious wakeup
   ASTERISK-25255: Missing AMI VarSet events when setting to an empty string.
   Reported by: Richard Mudgett
     * [147b86a8d1] Richard Mudgett -- strings.h: Fix issues with escape
       string functions.
   ASTERISK-24752: Crash in bridge_manager_service_req when bridge is
   destroyed by ARI during shutdown
   Reported by: Richard Mudgett
     * [340588c721] Richard Mudgett -- HTTP: Stop accepting requests on final
       system shutdown.

    Category: Core/ManagerInterface

   ASTERISK-24934: [patch]Asterisk manager output does not escape control
   characters
   Reported by: warren smith
     * [147b86a8d1] Richard Mudgett -- strings.h: Fix issues with escape
       string functions.
     * [2bf6fd263a] Kevin Harwell -- AMI: Escape string values.

    Category: Core/ManagerInterface/NewFeature

   ASTERISK-25189: AMI: Add Linkedid header to standard channel snapshot
   information.
   Reported by: Richard Mudgett
     * [3332869b48] Richard Mudgett -- AMI: Add Linkedid to the standard
       channel snapshot AMI event headers.

    Category: Core/PBX

   ASTERISK-25394: pbx: Incorrect device and presence state when changing
   hint details
   Reported by: Joshua Colp
     * [bb29802615] Kevin Harwell -- pbx: Deadlock between contexts container
       and context_merge locks
     * [ca401c6842] Joshua Colp -- pbx: Update device and presence state when
       changing a hint extension.
   ASTERISK-24683: Crash in PBX ast_hashtab_lookup_internal during core
   restart now
   Reported by: Peter Katzmann
     * [cdd2d5b484] Corey Farrell -- Replace most uses of ast_register_atexit
       with ast_register_cleanup.
   ASTERISK-24805: [patch] - ASAN: Race condition (heap-use-after-free) on
   asterisk closing
   Reported by: Badalian Vyacheslav
     * [cdd2d5b484] Corey Farrell -- Replace most uses of ast_register_atexit
       with ast_register_cleanup.
   ASTERISK-25367: pbx: Long pattern match hints may cause "core show hints"
   to crash
   Reported by: Joshua Colp
     * [9f5e1c0e56] Joshua Colp -- pbx: Fix crash when issuing "core show
       hints" with long pattern match.
   ASTERISK-25362: Deadlock due to presence state callback
   Reported by: Mark Michelson
     * [88ee3b3ef2] Mark Michelson -- Fix deadlock on presence state changes.

    Category: Core/Sorcery

   ASTERISK-25165: Testsuite - Sorcery memory cache leaks
   Reported by: Corey Farrell
     * [f5a6060707] Richard Mudgett -- res_sorcery_realtime.c: Fix crash from
       NULL sorcery object type.
     * [9cbd76630a] Mark Michelson -- res_sorcery_realtime: Fix leak of
       sorcery object type.

    Category: Core/UDPTL

   ASTERISK-25603: [patch]udptl: Uninitialized lengths and bufs in
   udptl_rx_packet cause ast_frdup crash
   Reported by: Walter Doekes
     * [4fe2aa9a20] Richard Mudgett -- AST-2016-003 udptl.c: Fix
       uninitialized values.
   ASTERISK-25742: Secondary IFP Packets can result in accessing
   uninitialized pointers and a crash
   Reported by: Torrey Searle
     * [4fe2aa9a20] Richard Mudgett -- AST-2016-003 udptl.c: Fix
       uninitialized values.

    Category: Features

   ASTERISK-25003: Asterisk crashes on attended transfer (using feature)
   Reported by: Artem Volodin
     * [de43ae38b4] Richard Mudgett -- features: Fix crash when transferee
       hangs up during DTMF attended transfer.

    Category: Resources/General

   ASTERISK-25441: Deadlock in res_sorcery_memory_cache.
   Reported by: Richard Mudgett
     * [5d12653d2a] Richard Mudgett -- res_sorcery_memory_cache.c: Fix
       deadlock with scheduler.
     * [b35b9a9e32] Richard Mudgett -- res_sorcery_memory_cache.c: Replace
       inline code with function.

    Category: Resources/res_ari

   ASTERISK-25522: ARI: Crash when creating channel via ARI originate with
   requesting channel
   Reported by: Matt Jordan
     * [385e26efe2] Matt Jordan -- main/dial: Protect access to the
       format_cap structure of the requesting channel
   ASTERISK-25091: Asterisk REST API - bridge.addChannel crash asterisk when
   calling channel hangup while adding to bridge
   Reported by: Ilya Trikoz
     * [deccd2ef3c] Mark Michelson -- Resolve race conditions involving
       Stasis bridges.
   ASTERISK-24812: ARI: Creating channels through /channels resource always
   uses SLIN, which results in unneeded transcoding
   Reported by: Matt Jordan
     * [33c73ffeaa] Matt Jordan -- ARI/PJSIP: Apply requesting channel's
       format cap to created channels

    Category: Resources/res_ari_bridges

   ASTERISK-25091: Asterisk REST API - bridge.addChannel crash asterisk when
   calling channel hangup while adding to bridge
   Reported by: Ilya Trikoz
     * [deccd2ef3c] Mark Michelson -- Resolve race conditions involving
       Stasis bridges.

    Category: Resources/res_ari_channels

   ASTERISK-25522: ARI: Crash when creating channel via ARI originate with
   requesting channel
   Reported by: Matt Jordan
     * [385e26efe2] Matt Jordan -- main/dial: Protect access to the
       format_cap structure of the requesting channel
   ASTERISK-24812: ARI: Creating channels through /channels resource always
   uses SLIN, which results in unneeded transcoding
   Reported by: Matt Jordan
     * [33c73ffeaa] Matt Jordan -- ARI/PJSIP: Apply requesting channel's
       format cap to created channels

    Category: Resources/res_http_websocket

   ASTERISK-24972: Transport Layer Security (TLS) Protocol BEAST
   Vulnerability - Investigate vulnerability of HTTP server
   Reported by: Alex A. Welzl
     * [b50d584022] Joshua Colp -- AST-2016-001 http: Provide greater control
       of TLS and set modern defaults.
   ASTERISK-25312: res_http_websocket: Terminate connection on fatal cases
   Reported by: Joshua Colp
     * [128d2348e6] Joshua Colp -- res_http_websocket: Forcefully terminate
       on write errors.

    Category: Resources/res_parking

   ASTERISK-25369: res_parking: ParkAndAnnounce - Inheritable variables
   aren't applied to the announcer channel
   Reported by: Jonathan Rose
     * [7b5bcbeebe] Jonathan Rose -- ParkAndAnnounce: Add variable
       inheritance
   ASTERISK-25254: Crash if dialplan sets ATTENDEDTRANSFER to an empty string
   before Park.
   Reported by: Richard Mudgett
     * [131f6ef8f5] Richard Mudgett -- res_parking: Fix crash if
       ATTENDEDTRANSFER set empty before Park.

    Category: Resources/res_pjsip

   ASTERISK-25712: Second call to already-on-call phone and Asterisk sends
   "Ready"
   Reported by: Richard Mudgett
     * [826ff1d7a3] Richard Mudgett -- res/res_pjsip/presence_xml.c: Add
       missing 2nd call presence state case.
   ASTERISK-25668: res_pjsip: Deadlock in distributor
   Reported by: Mark Michelson
     * [ca869878b4] Mark Michelson -- PJSIP: Prevent deadlock due to
       dialog/transaction lock inversion.
   ASTERISK-25168: Random Core Dumps on Asterisk 13.4 PJSIP, in
   ast_channel_name at channel_internal_api.c
   Reported by: Carl Fortin
     * [4d10ed67d0] Richard Mudgett -- PJSIP FAX: Fix T.38 automatic reject
       timer NULL channel pointer dereferences.
     * [1c89230e2a] Richard Mudgett -- PJSIP XML, XPIDF: Fix buffer size
       overwrite memory corruption error.
   ASTERISK-25486: res_pjsip: Fix deadlock when validating URIs
   Reported by: Joshua Colp
     * [43323995ba] Joshua Colp -- res_pjsip: Move URI validation to use
       time.
   ASTERISK-25115: Crash related to func sip_resolve_invoke_user_callback of
   res_pjsip/pjsip_resolver.c
   Reported by: John Bigelow
     * [813b743baa] Richard Mudgett -- res_pjsip: Need to use the same
       serializer for a pjproject SIP transaction.
   ASTERISK-24999: PJSIP crashes with malformed contact line
   Reported by: snuffy
     * [943d5c0c99] gtjoseph -- res_pjsip: Validate that contact uris start
       with sip: or sips:
   ASTERISK-25295: res_pjsip crash - pjsip_uri_get_uri at
   /usr/include/pjsip/sip_uri.h
   Reported by: Dmitriy Serov
     * [0901a82adb] Joshua Colp -- taskprocessor: Fix race condition between
       unreferencing and finding.
   ASTERISK-25304: res_pjsip: XML sanitization may write past buffer
   Reported by: Joshua Colp
     * [9e93ad109b] Joshua Colp -- res_pjsip: Ensure sanitized XML is NULL
       terminated.
   ASTERISK-24727: PJSIP: Crash experienced during multi-Asterisk transfer
   scenario.
   Reported by: Mark Michelson
     * [f6dcbd9707] Richard Mudgett -- res_pjsip_session: Fix double
       re-INVITE collision crash.
   ASTERISK-24910: "timer=no" and "timer=required" settings in pjsip.conf
   fail
   Reported by: Ray Crumrine
     * [1e98fcac6b] Kevin Harwell -- res_pjsip: config option 'timers' can't
       be set to 'no'
   ASTERISK-25131: chan_pjsip: In-dialog authentication not handled.
   Reported by: Richard Mudgett
     * [bd32327353] Richard Mudgett -- res_pjsip_session: Fix in-dialog
       authentication.
   ASTERISK-24615: When Multiple Transports Exist in pjsip.conf, Incorrect
   External Addresses is Used in SIP Packets When Responding to INVITE
   Reported by: David Justl
     * [bf31a486cb] Joshua Colp -- res_pjsip / res_pjsip_multihomed: Use the
       correct transport and addressing information on UAS sessions.
   ASTERISK-25020: Mismatched response to outgoing REGISTER request
   Reported by: Mark Michelson
     * [11d85ea251] Mark Michelson -- res_pjsip_outbound_registration: Don't
       fail on delayed processing: 13.
     * [0037ca59a6] Mark Michelson -- res_pjsip_outbound_registration: Add
       debugging messages.
   ASTERISK-24920: Asterisk handles duplicate SIP requests as if they were
   each a new request
   Reported by: Mark Michelson
     * [b5b44876c2] Mark Michelson -- Add stateful PJSIP response API call,
       and use it for out-of-dialog responses.
   ASTERISK-24840: res_pjsip: conflicting endpoint identifiers
   Reported by: Kevin Harwell
     * [e0b644ddb7] Kevin Harwell -- res_pjsip: Allow configuration of
       endpoint identifier query order
     * [d7c8041f6b] Kevin Harwell -- res_pjsip: Allow configuration of
       endpoint identifier query order
     * [6cd70450fd] Kevin Harwell -- Revert - res_pjsip: Allow configuration
       of endpoint identifier query order
     * [4eb1dd4b35] Kevin Harwell -- res_pjsip: Allow configuration of
       endpoint identifier query order
   ASTERISK-24741: dtls_handler causes Asterisk to crash
   Reported by: Zane Conkle
     * [3ad393b043] Kevin Harwell -- res_pjsip: dtls_handler causes Asterisk
       to crash

    Category: Resources/res_pjsip_messaging

   ASTERISK-24937: [patch]res_pjsip_messaging: Messages may be sent out of
   order
   Reported by: Mark Michelson
     * [42b7ebdd4d] Mark Michelson -- res_pjsip_messaging: Serialize outbound
       SIP MESSAGEs

    Category: Resources/res_pjsip_mwi

   ASTERISK-25180: res_pjsip_mwi: Unsolicited MWI requires reload
   Reported by: Joshua Colp
     * [a35d6feae2] Joshua Colp -- res_pjsip_mwi: Set up unsolicited MWI upon
       registration.
   ASTERISK-24982: res_pjsip_mwi: Unsolicited MWI NOTIFY only sent on mailbox
   changes
   Reported by: Joshua Colp
     * [677898f839] Joshua Colp -- res_pjsip_mwi: Send unsolicited MWI NOTIFY
       on startup and when endpoint registers.

    Category: Resources/res_pjsip_nat

   ASTERISK-25196: res_pjsip_nat: rewrite_contact should not be applied to
   Contact header when Record-Route headers are present
   Reported by: Mark Michelson
     * [8ba3de43ad] Mark Michelson -- res_pjsip_nat: Adjust when contact
       should be rewritten.
     * [0d535df734] Mark Michelson -- res_pjsip_nat: Rewrite route set when
       required.

    Category: Resources/res_pjsip_outbound_registration

   ASTERISK-25485: res_pjsip_outbound_registration: registration stops due to
   400 response
   Reported by: Kevin Harwell
     * [c425e26595] Kevin Harwell -- res_pjsip_outbound_registration:
       registration stops due to fatal 4xx response
   ASTERISK-25037: res_pjsip_outbound_registration: Potential crash in
   off-nominal failure case when sending message
   Reported by: Joshua Colp
     * [47df4e031c] Joshua Colp -- res_pjsip_outbound_registration: Fix
       double unref on error return.

    Category: Resources/res_pjsip_pubsub

   ASTERISK-25513: Crash: malloc failed with high load of subscriptions.
   Reported by: John Bigelow
     * [62799fe778] Mark Michelson -- res_pjsip: Set threadpool max size
       default to 50.
   ASTERISK-24970: Crash in res_pjsip_pubsub handling of failed notify
   Reported by: Scott Griepentrog
     * [0b04269e73] Scott Griepentrog -- res_pjsip_pubsub: On notify fail
       deleted sub_tree is then referenced
   ASTERISK-25306: Persistent subscriptions can save multiple SIP messages at
   once, leading to potential crashes.
   Reported by: Mark Michelson
     * [739fca6084] Richard Mudgett -- res_pjsip.c: Fix crash from corrupt
       saved SUBSCRIBE message.
     * [bfb15bea06] Mark Michelson -- res_pjsip_pubsub: More accurately
       persist packet.
   ASTERISK-25057: res_pjsip_pubsub: Crash in send_notify due to invalid root
   pointer in sub_tree
   Reported by: Matt Jordan
     * [6433b697ae] Joshua Colp -- res_pjsip_exten_state: Fix race condition
       between sending NOTIFY and termination

    Category: Resources/res_pjsip_refer

   ASTERISK-25204: res_pjsip_refer: Duplicated Referred-By or Replaces
   headers on outbound INVITEs.
   Reported by: Mark Michelson
     * [20f50131d7] Mark Michelson -- res_pjsip_refer: Prevent sending
       duplicate headers.
   ASTERISK-24700: CRASH: NULL channel is being passed to
   ast_bridge_transfer_attended()
   Reported by: Zane Conkle
     * [c994a3bfa0] Richard Mudgett -- res_pjsip_refer: Fix crash from a
       REFER and BYE collision.

    Category: Resources/res_pjsip_sdp_rtp

   ASTERISK-25356: res_pjsip_sdp_rtp: Multiple keepalive scheduled items may
   exist
   Reported by: Joshua Colp
     * [8842637d8f] Joshua Colp -- res_pjsip_sdp_rtp: Fix multiple keepalive
       scheduled items.

    Category: Resources/res_pjsip_session

   ASTERISK-25131: chan_pjsip: In-dialog authentication not handled.
   Reported by: Richard Mudgett
     * [bd32327353] Richard Mudgett -- res_pjsip_session: Fix in-dialog
       authentication.

    Category: Resources/res_pjsip_t38

   ASTERISK-24928: [patch]t38_udptl_maxdatagram in pjsip.conf not honored
   Reported by: Juergen Spies
     * [e84fcb2464] Juergen Spies -- res/res_pjsip_t38: Add missing
       initialization of t38faxmaxdatagram
   ASTERISK-24933: T38 fails negotiation
   Reported by: Jonathan Rose
     * [918ca7dd36] Jonathan Rose -- res_pjsip_t38: Fix FAX failures when
       using PJSIP with authentication

    Category: Resources/res_stasis

   ASTERISK-24701: Stasis: Write timeout on WebSocket fails to fully
   disconnect underlying socket, leading to events being dropped with no
   additional information
   Reported by: Matt Jordan
     * [8be00450b9] Kevin Harwell -- res_http_websocket: websocket write
       timeout fails to fully disconnect

    Category: Tests/testsuite

   ASTERISK-25165: Testsuite - Sorcery memory cache leaks
   Reported by: Corey Farrell
     * [f5a6060707] Richard Mudgett -- res_sorcery_realtime.c: Fix crash from
       NULL sorcery object type.
     * [9cbd76630a] Mark Michelson -- res_sorcery_realtime: Fix leak of
       sorcery object type.
   ASTERISK-25172: Crash in channels/sip/sip blind transfer/caller_refer_only
   test in ast_format_cap_append_from_cap during ast_request
   Reported by: Matt Jordan
     * [ac9432fdb6] Joshua Colp -- app_dial: Hold reference to calling
       channel formats when dialing outbound.

    Category: pjproject/pjsip

   ASTERISK-25513: Crash: malloc failed with high load of subscriptions.
   Reported by: John Bigelow
     * [62799fe778] Mark Michelson -- res_pjsip: Set threadpool max size
       default to 50.

  New Feature

    Category: Channels/chan_pjsip

   ASTERISK-25259: chan_pjsip: Add rtptimeout support
   Reported by: Joshua Colp
     * [fae081ad5b] Joshua Colp -- pjsip: Add rtp_timeout and
       rtp_timeout_hold endpoint options.

    Category: Resources/res_pjsip

   ASTERISK-25377: res_pjsip: Change default "From user" from UUID to
   something more palatable
   Reported by: Mark Michelson
     * [500856b4f0] Mark Michelson -- res_pjsip: Change default from user
       value.

    Category: Resources/res_pjsip_sdp_rtp

   ASTERISK-25259: chan_pjsip: Add rtptimeout support
   Reported by: Joshua Colp
     * [fae081ad5b] Joshua Colp -- pjsip: Add rtp_timeout and
       rtp_timeout_hold endpoint options.

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author      | Summary                                     |
   |------------+-------------+---------------------------------------------|
   | 2142c74a02 | Kevin       | .version: Update for certified/13.1-cert3   |
   |            | Harwell     |                                             |
   |------------+-------------+---------------------------------------------|
   | 07c95d33bd | Kevin       | .lastclean: Update for certified/13.1-cert3 |
   |            | Harwell     |                                             |
   |------------+-------------+---------------------------------------------|
   | ce314be09d | Kevin       | realtime: Add database scripts for          |
   |            | Harwell     | certified/13.1-cert3                        |
   |------------+-------------+---------------------------------------------|
   | 22eb1b48c0 | Mark        | res_pjsip_pubsub: Prevent crash from AMI    |
   |            | Michelson   | command on freed subscription.              |
   |------------+-------------+---------------------------------------------|
   | f63fb0e337 | Joshua Colp | test_time: Provide a timeout when waiting.  |
   |------------+-------------+---------------------------------------------|
   | c0a7df1021 | Mark        | Taskprocessors: Increase high-water mark    |
   |            | Michelson   |                                             |
   |------------+-------------+---------------------------------------------|
   | 2fc3267677 | Mark        | res_pjsip distributor: Don't send 503       |
   |            | Michelson   | response to responses.                      |
   |------------+-------------+---------------------------------------------|
   | 287cab1a53 | Mark        | res_pjsip: Deny requests when threadpool    |
   |            | Michelson   | queue is backed up.                         |
   |------------+-------------+---------------------------------------------|
   | 6eda60936a | Kevin       | alembic: Bad down revision in               |
   |            | Harwell     | add_default_from_user script                |
   |------------+-------------+---------------------------------------------|
   | b95101aab0 | Mark        | format_cap: Detect vector allocation        |
   |            | Michelson   | failures.                                   |
   |------------+-------------+---------------------------------------------|
   | dd4d4e40e5 | Mark        | res_pjsip_pubsub: Prevent sending NOTIFY on |
   |            | Michelson   | destroyed dialog.                           |
   |------------+-------------+---------------------------------------------|
   | bda0a24206 | Mark        | res_pjsip_pubsub: Ensure dialog lock        |
   |            | Michelson   | balance.                                    |
   |------------+-------------+---------------------------------------------|
   | 7a22fc27fb | Mark        | res_pjsip_pubsub: Prevent crashes on final  |
   |            | Michelson   | NOTIFY.                                     |
   |------------+-------------+---------------------------------------------|
   | 7fc9a998b1 | Mark        | res_pjsip_pubsub: Remove serializer when    |
   |            | Michelson   | sending final NOTIFY.                       |
   |------------+-------------+---------------------------------------------|
   | 7a47ab77c1 | Mark        | res_pjsip_pubsub: Fix crash on destruction  |
   |            | Michelson   | of empty subscription tree.                 |
   |------------+-------------+---------------------------------------------|
   | 8def38f6a2 | Mark        | res_pjsip_pubsub: Solidify lifetime and     |
   |            | Michelson   | ownership of objects.                       |
   |------------+-------------+---------------------------------------------|
   | 16afb39aec | Mark        | res_pjsip_pubsub: Set the endpoint on       |
   |            | Michelson   | SUBSCRIBE dialogs.                          |
   |------------+-------------+---------------------------------------------|
   | 78e4783572 | Richard     | Add missing failure checks to               |
   |            | Mudgett     | ast_str_set_va() callers.                   |
   |------------+-------------+---------------------------------------------|
   | b5cfcfc427 | Matt Jordan | contrib/scripts/autosupport: Update for     |
   |            |             | Asterisk 13                                 |
   |------------+-------------+---------------------------------------------|
   | 47a9452780 | Richard     | config.c: Fix off-nominal memory leak.      |
   |            | Mudgett     |                                             |
   |------------+-------------+---------------------------------------------|
   | 728a2b7013 | Richard     | config.c: Fix potential memory corruption   |
   |            | Mudgett     | after [section](+).                         |
   |------------+-------------+---------------------------------------------|
   | 9ec52447bd | Richard     | res_sorcery_memory_cache.c: Shutdown in a   |
   |            | Mudgett     | less crash potential order.                 |
   |------------+-------------+---------------------------------------------|
   | 110927bacc | Richard     | res_sorcery_memory_cache.c: Misc tweaks.    |
   |            | Mudgett     |                                             |
   |------------+-------------+---------------------------------------------|
   | 14ac763ab3 | Richard     | res_sorcery_memory_cache.c: Made use        |
   |            | Mudgett     | OBJ_SEARCH_MASK.                            |
   |------------+-------------+---------------------------------------------|
   | 20702e0cf2 | Mark        | res_pjsip_pubsub: Eliminate race during     |
   |            | Michelson   | initial NOTIFY.                             |
   |------------+-------------+---------------------------------------------|
   | 3ef74244a4 | Mark        | scheduler: Use queue for allocating sched   |
   |            | Michelson   | IDs.                                        |
   |------------+-------------+---------------------------------------------|
   | a1e1d8e815 | Mark        | res_pjsip: Fix contact refleak on stateful  |
   |            | Michelson   | responses.                                  |
   |------------+-------------+---------------------------------------------|
   | 4083e543fd | Joshua Colp | res_pjsip_pubsub: On recreated notify fail  |
   |            |             | deleted sub_tree is referenced              |
   |------------+-------------+---------------------------------------------|
   | f049ad951b | Mark        | res_pjsip_sdp_rtp: Restore removed NULL     |
   |            | Michelson   | check.                                      |
   |------------+-------------+---------------------------------------------|
   | 7089472637 | Joshua Colp | res_http_websocket: When shutting down a    |
   |            |             | session don't close closed socket           |
   |------------+-------------+---------------------------------------------|
   | 0fcc530dc7 | Joshua Colp | sorcery: Fix cache creation callback.       |
   |------------+-------------+---------------------------------------------|
   | c8d53f2372 | Mark        | res_sorcery_memory_cache: Remove            |
   |            | Michelson   | ASTERISK_REGISTER_FILE() macro.             |
   |------------+-------------+---------------------------------------------|
   | a72cf6ce81 | Joshua Colp | res_sorcery_memory_cache: Execute stale     |
   |            |             | unit test last.                             |
   |------------+-------------+---------------------------------------------|
   | 49a37f22e1 | Jonathan    | app: Add functions to swap vm function      |
   |            | Rose        | table                                       |
   |------------+-------------+---------------------------------------------|
   | f58c0acfa2 | gtjoseph    | res/res_corosync: Always decline module     |
   |            |             | load, instead of failing                    |
   |------------+-------------+---------------------------------------------|
   | ca2174bb23 | Matt Jordan | .version: Update for                        |
   |            |             | certified/13.1-cert3-rc1                    |
   |------------+-------------+---------------------------------------------|
   | 2ef2c12fae | Matt Jordan | .lastclean: Update for                      |
   |            |             | certified/13.1-cert3-rc1                    |
   |------------+-------------+---------------------------------------------|
   | 5032390639 | Matt Jordan | realtime: Add database scripts for          |
   |            |             | certified/13.1-cert3-rc1                    |
   |------------+-------------+---------------------------------------------|
   |            | Mark        | res_pjsip_outbound_authenticator_digest:    |
   | 08a4cf3237 | Michelson   | Add missing outbound authenticator          |
   |            |             | callback.                                   |
   |------------+-------------+---------------------------------------------|
   | cb67aae596 | gtjoseph    | More .gitignore updates                     |
   |------------+-------------+---------------------------------------------|
   | 70fab74baf | gtjoseph    | .gitignore updates for master/13            |
   |------------+-------------+---------------------------------------------|
   | 7d64479748 | Matt Jordan | git migration: Remove support for file      |
   |            |             | versions                                    |
   |------------+-------------+---------------------------------------------|
   | 9237e8b11e | Corey       | main/editline: Add .gitignore.              |
   |            | Farrell     |                                             |
   |------------+-------------+---------------------------------------------|
   | 630dbcb8b4 | Matt Jordan | .gitignore: Ignore tarballs (*.gz)          |
   |------------+-------------+---------------------------------------------|
   | e4892f9aa4 | gtjoseph    | Add .gitignore and .gitreview files         |
   |------------+-------------+---------------------------------------------|
   | 45f09898e9 | Mark        | Do not queue message requests that we do    |
   |            | Michelson   | not respond to.                             |
   |------------+-------------+---------------------------------------------|
   | b6fff2719d | Mark        | core: avoid possible asterisk -r crash from |
   |            | Michelson   | long id                                     |
   |------------+-------------+---------------------------------------------|
   | 8ae3670781 | Ashley      | stasis: set a channel variable on websocket |
   |            | Sanders     | disconnect error                            |
   |------------+-------------+---------------------------------------------|
   | 259227eb1a | Ashley      | stasis: set a channel variable on websocket |
   |            | Sanders     | disconnect error                            |
   |------------+-------------+---------------------------------------------|
   | 66b8c7cab4 | Richard     | res_pjsip_registrar_expire.c: Cleanup       |
   |            | Mudgett     | scheduler leaks on unload/shutdown.         |
   |------------+-------------+---------------------------------------------|
   | fb7062afca | Richard     | Audit ast_pjsip_rdata_get_endpoint() usage  |
   |            | Mudgett     | for ref leaks.                              |
   |------------+-------------+---------------------------------------------|
   | cf9799845f | Richard     | res_pjsip_sdp_rtp,sorcery: Fix invalid      |
   |            | Mudgett     | access and memory leak respectively.        |
   |------------+-------------+---------------------------------------------|
   | 90fc65da62 | Richard     | Audit ast_sockaddr_resolve() usage for      |
   |            | Mudgett     | memory leaks.                               |
   |------------+-------------+---------------------------------------------|
   | cd4e18c4cc | Richard     | Multiple revisions 431583,433005            |
   |            | Mudgett     |                                             |
   |------------+-------------+---------------------------------------------|
   | 52366a423c | Matt Jordan | translate: Prevent invalid memory accesses  |
   |            |             | on fast shutdown                            |
   |------------+-------------+---------------------------------------------|
   | 69dc8f9ec2 | Kevin       | pjsip_options: Fix continued qualifies      |
   |            | Harwell     | after endpoint/aor deletion                 |
   |------------+-------------+---------------------------------------------|
   | 2125e1b2de | Mark        | Add Asterisk 13 revision 431420 that fixes  |
   |            | Michelson   | disabling 100rel option on PJSIP endpoints. |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 b/.gitignore                                                                                |   31
 b/.gitreview                                                                                |    4
 b/.version                                                                                  |    2
 b/CHANGES                                                                                   |   47
 b/ChangeLog                                                                                 |  831 ---
 b/UPGRADE.txt                                                                               |   31
 b/addons/.gitignore                                                                         |    1
 b/agi/.gitignore                                                                            |    3
 b/apps/app_chanspy.c                                                                        |    3
 b/apps/app_confbridge.c                                                                     |   24
 b/apps/app_dial.c                                                                           |  252
 b/apps/app_directory.c                                                                      |   48
 b/apps/app_externalivr.c                                                                    |    2
 b/apps/app_followme.c                                                                       |   13
 b/apps/app_page.c                                                                           |   28
 b/apps/app_queue.c                                                                          |  175
 b/apps/app_record.c                                                                         |    3
 b/apps/app_stasis.c                                                                         |   42
 b/apps/app_voicemail.c                                                                      |    5
 b/apps/confbridge/conf_config_parser.c                                                      |    4
 b/apps/confbridge/include/confbridge.h                                                      |    2
 b/bridges/bridge_native_rtp.c                                                               |   28
 b/build_tools/.gitignore                                                                    |    1
 b/build_tools/make_version                                                                  |    7
 b/channels/chan_dahdi.c                                                                     |   59
 b/channels/chan_iax2.c                                                                      |   21
 b/channels/chan_pjsip.c                                                                     |   49
 b/channels/chan_sip.c                                                                       |   65
 b/channels/chan_skinny.c                                                                    |   67
 b/channels/sig_pri.c                                                                        |   25
 b/channels/sig_pri.h                                                                        |    2
 b/channels/sip/config_parser.c                                                              |    9
 b/channels/sip/include/security_events.h                                                    |    3
 b/channels/sip/security_events.c                                                            |    5
 b/configs/samples/chan_dahdi.conf.sample                                                    |   14
 b/configs/samples/confbridge.conf.sample                                                    |    6
 b/configs/samples/http.conf.sample                                                          |   20
 b/configs/samples/pjsip.conf.sample                                                         |   18
 b/contrib/ast-db-manage/config/versions/154177371065_add_default_from_user.py               |   22
 b/contrib/ast-db-manage/config/versions/28ce1e718f05_add_fatal_response_interval.py         |   22
 b/contrib/ast-db-manage/config/versions/45e3f47c6c44_add_pjsip_endpoint_identifier_order.py |   21
 b/contrib/ast-db-manage/config/versions/498357a710ae_add_rtp_keepalive.py                   |   22
 b/contrib/ast-db-manage/config/versions/5a6ccc758633_add_pjsip_timeout_options.py           |   24
 b/contrib/realtime/mssql/mssql_cdr.sql                                                      |   42
 b/contrib/realtime/mssql/mssql_config.sql                                                   | 1034 ++++
 b/contrib/realtime/mssql/mssql_voicemail.sql                                                |   48
 b/contrib/realtime/mysql/mysql_config.sql                                                   |   32
 b/contrib/realtime/oracle/oracle_config.sql                                                 |   36
 b/contrib/realtime/postgresql/postgresql_config.sql                                         |   24
 b/contrib/realtime/sqlserver/mssql_config.sql                                               |   12
 b/contrib/scripts/autosupport                                                               |   95
 b/doc/.gitignore                                                                            |    1
 b/doc/appdocsxml.xslt                                                                       |    6
 b/funcs/func_channel.c                                                                      |   25
 b/include/asterisk.h                                                                        |   64
 b/include/asterisk/.gitignore                                                               |    3
 b/include/asterisk/app.h                                                                    |   16
 b/include/asterisk/bridge.h                                                                 |   12
 b/include/asterisk/channel.h                                                                |   19
 b/include/asterisk/features_config.h                                                        |   15
 b/include/asterisk/global_datastores.h                                                      |    6
 b/include/asterisk/max_forwards.h                                                           |   78
 b/include/asterisk/res_pjsip.h                                                              |  139
 b/include/asterisk/res_pjsip_presence_xml.h                                                 |    9
 b/include/asterisk/res_pjsip_pubsub.h                                                       |   19
 b/include/asterisk/res_pjsip_session.h                                                      |   10
 b/include/asterisk/rtp_engine.h                                                             |   32
 b/include/asterisk/sorcery.h                                                                |    9
 b/include/asterisk/strings.h                                                                |   54
 b/include/asterisk/taskprocessor.h                                                          |    8
 b/include/asterisk/tcptls.h                                                                 |   10
 b/include/asterisk/threadpool.h                                                             |   22
 b/include/asterisk/threadstorage.h                                                          |   43
 b/main/.gitignore                                                                           |    3
 b/main/aoc.c                                                                                |    2
 b/main/app.c                                                                                |   61
 b/main/asterisk.c                                                                           |  262 -
 b/main/astfd.c                                                                              |    2
 b/main/astmm.c                                                                              |    2
 b/main/astobj2.c                                                                            |    2
 b/main/astobj2_container.c                                                                  |    2
 b/main/audiohook.c                                                                          |    4
 b/main/bridge.c                                                                             |   26
 b/main/bridge_basic.c                                                                       |  203
 b/main/bridge_channel.c                                                                     |   31
 b/main/ccss.c                                                                               |    6
 b/main/cel.c                                                                                |   28
 b/main/channel.c                                                                            |   48
 b/main/cli.c                                                                                |    2
 b/main/codec.c                                                                              |    2
 b/main/config.c                                                                             |   47
 b/main/config_options.c                                                                     |   29
 b/main/core_local.c                                                                         |   13
 b/main/core_unreal.c                                                                        |   12
 b/main/data.c                                                                               |    2
 b/main/dial.c                                                                               |   47
 b/main/dnsmgr.c                                                                             |    2
 b/main/editline/.gitignore                                                                  |   13
 b/main/features.c                                                                           |   30
 b/main/features_config.c                                                                    |   15
 b/main/file.c                                                                               |    2
 b/main/format.c                                                                             |    2
 b/main/format_cache.c                                                                       |    2
 b/main/format_cap.c                                                                         |   29
 b/main/global_datastores.c                                                                  |   56
 b/main/http.c                                                                               |   14
 b/main/image.c                                                                              |    2
 b/main/indications.c                                                                        |    2
 b/main/manager.c                                                                            |   24
 b/main/manager_bridges.c                                                                    |    6
 b/main/manager_channels.c                                                                   |   41
 b/main/manager_endpoints.c                                                                  |    2
 b/main/manager_mwi.c                                                                        |    2
 b/main/manager_system.c                                                                     |    2
 b/main/max_forwards.c                                                                       |  165
 b/main/message.c                                                                            |   10
 b/main/netsock2.c                                                                           |    4
 b/main/pbx.c                                                                                |  467 +
 b/main/pickup.c                                                                             |    2
 b/main/presencestate.c                                                                      |   15
 b/main/rtp_engine.c                                                                         |   26
 b/main/sched.c                                                                              |  150
 b/main/sorcery.c                                                                            |   25
 b/main/sounds_index.c                                                                       |    2
 b/main/stasis.c                                                                             |   10
 b/main/stasis_channels.c                                                                    |   68
 b/main/stdtime/localtime.c                                                                  |    5
 b/main/stun.c                                                                               |    2
 b/main/taskprocessor.c                                                                      |   32
 b/main/tcptls.c                                                                             |   30
 b/main/threadpool.c                                                                         |   81
 b/main/threadstorage.c                                                                      |    2
 b/main/timing.c                                                                             |    2
 b/main/translate.c                                                                          |    4
 b/main/udptl.c                                                                              |   17
 b/main/utils.c                                                                              |  134
 b/main/xmldoc.c                                                                             |   10
 b/menuselect/.gitignore                                                                     |    7
 b/pbx/pbx_dundi.c                                                                           |    1
 b/res/ael/.gitignore                                                                        |    1
 b/res/ari/ari_websockets.c                                                                  |   14
 b/res/ari/resource_channels.c                                                               |   10
 b/res/parking/parking_applications.c                                                        |   73
 b/res/res_corosync.c                                                                        |   14
 b/res/res_http_websocket.c                                                                  |   45
 b/res/res_pjsip.c                                                                           |  487 +
 b/res/res_pjsip/config_global.c                                                             |   41
 b/res/res_pjsip/config_system.c                                                             |    2
 b/res/res_pjsip/location.c                                                                  |   35
 b/res/res_pjsip/pjsip_configuration.c                                                       |   57
 b/res/res_pjsip/pjsip_distributor.c                                                         |  140
 b/res/res_pjsip/pjsip_options.c                                                             |   38
 b/res/res_pjsip/presence_xml.c                                                              |   39
 b/res/res_pjsip_acl.c                                                                       |    2
 b/res/res_pjsip_caller_id.c                                                                 |   12
 b/res/res_pjsip_dialog_info_body_generator.c                                                |    9
 b/res/res_pjsip_diversion.c                                                                 |    5
 b/res/res_pjsip_dlg_options.c                                                               |  107
 b/res/res_pjsip_dtmf_info.c                                                                 |    8
 b/res/res_pjsip_endpoint_identifier_anonymous.c                                             |    2
 b/res/res_pjsip_endpoint_identifier_ip.c                                                    |    2
 b/res/res_pjsip_endpoint_identifier_user.c                                                  |    2
 b/res/res_pjsip_exten_state.c                                                               |   37
 b/res/res_pjsip_messaging.c                                                                 |   54
 b/res/res_pjsip_multihomed.c                                                                |   74
 b/res/res_pjsip_mwi.c                                                                       |  263 -
 b/res/res_pjsip_nat.c                                                                       |   97
 b/res/res_pjsip_outbound_authenticator_digest.c                                             |   15
 b/res/res_pjsip_outbound_registration.c                                                     |  151
 b/res/res_pjsip_pidf_body_generator.c                                                       |   11
 b/res/res_pjsip_pidf_digium_body_supplement.c                                               |    2
 b/res/res_pjsip_pubsub.c                                                                    |  400 +
 b/res/res_pjsip_pubsub.exports.in                                                           |    2
 b/res/res_pjsip_refer.c                                                                     |   62
 b/res/res_pjsip_registrar.c                                                                 |    9
 b/res/res_pjsip_registrar_expire.c                                                          |   64
 b/res/res_pjsip_sdp_rtp.c                                                                   |  155
 b/res/res_pjsip_send_to_voicemail.c                                                         |   10
 b/res/res_pjsip_session.c                                                                   |  603 +-
 b/res/res_pjsip_t38.c                                                                       |   86
 b/res/res_pjsip_xpidf_body_generator.c                                                      |    9
 b/res/res_rtp_asterisk.c                                                                    |   17
 b/res/res_sorcery_memory_cache.c                                                            | 2584 ++++++++++
 b/res/res_sorcery_realtime.c                                                                |    2
 b/res/res_stasis.c                                                                          |    6
 b/res/stasis/control.c                                                                      |    4
 b/tests/test_sorcery_memory_cache_thrash.c                                                  |  618 ++
 b/tests/test_strings.c                                                                      |   70
 b/tests/test_threadpool.c                                                                   |   81
 certified-asterisk-13.1-cert2-summary.html                                                  |   62
 certified-asterisk-13.1-cert2-summary.txt                                                   |   93
 191 files changed, 10269 insertions(+), 2854 deletions(-)
